import{_ as D}from"./AuthenticatedLayout-CRy0OdIW.js";import{_ as E}from"./DataTable-Dy5Noi4M.js";import{H as S,g as V,a as p,b as s,h as O,d as n,w as i,f as x,t as r,n as y,F as M,I as N,p as q,q as g,o as j}from"./app-D5HoBR2n.js";import{u as B}from"./useAlert-DXi6OtDz.js";import{_ as L}from"./Alerta-D7M1lK8y.js";import I from"./CreateAttendee-Dl5UeT4t.js";import H from"./EditAttendee-BDh-lJWV.js";import P from"./UploadDiploma-BCyfu5gH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BNIJFFrm.js";import"./Drawer-YMzOoqCI.js";import"./Modal-B-XJAO6a.js";import"./useImageDropped-C-kjBIld.js";const F={class:"p-6 border-t border-gray-100 dark:border-gray-800 sm:p-6"},G={class:"space-y-5"},U=["onClick"],oe=Object.assign({layout:D},{__name:"Index",props:{attendees:{type:Object,default:()=>({})},events:{type:Object,default:()=>({})},eventName:{type:String,default:""},flash:{type:Object,default:()=>({})},auth:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})}},setup(h){const{alertState:o,success:v,errorA:_,warning:w,hideAlert:c}=B(),m=g(!1),f=g(!1),b=g(!1),u=g(null),a=h,d=N();S(()=>{(d.props.success||a.flash.success)&&v(d.props.success||a.flash.success),(d.props.error||a.flash.error)&&_(d.props.error||a.flash.error),(d.props.warning||a.flash.warning)&&w(d.props.warning||a.flash.warning)});const C=()=>{m.value=!0},k=l=>{u.value=l,f.value=!0},$=l=>{w("¿Confirma que desea eliminar a este asistente? Esta acción no se puede deshacer.",{title:"Eliminar registro",buttonText:"Sí, eliminar",cancelText:"Cancelar",onConfirm:()=>{c(),q.delete(route("attendees.delete",l))}})},A=l=>{l.diploma_url?window.open(l.diploma_url,"_blank"):(u.value=l,b.value=!0)},z=()=>{v("Asistente registrado exitosamente"),m.value=!1},T=()=>{v("Asistente actualizado exitosamente"),f.value=!1,u.value=null};return(l,t)=>(j(),V(M,null,[p(s(O),{title:"Asistentes a cursos"}),n("div",F,[n("div",G,[t[7]||(t[7]=n("div",{class:""},[n("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Asistentes a cursos"),n("p",{class:"text-sm text-gray-500"},"Administra los asistentes registrados a cursos desde esta sección")],-1)),p(E,{columns:[{label:"ID",key:"id"},{label:"Curso",key:"event_name"},{label:"Asistente",key:"name"},{label:"Telefono",key:"phone"},{label:"Ciudad/Estado",key:"origin"},{label:"Tipo de Usuario",key:"person_type",align:"center"},{label:"Estatus de Pago",key:"status",align:"center"},{label:"Asistencia",key:"did_attend",align:"center"}],paginator:a.attendees,searchable:!0,"per-page-options":[10,25,50,100],"allow-create":!0,"allow-actions":!0,"allow-edit":!0,"allow-delete":!0,onCreate:C,onEdit:k,onDelete:$,only:["attendees"]},{"cell-date":i(({item:e})=>[x(r(new Date(e.date).toLocaleDateString("en-GB")),1)]),"cell-origin":i(({item:e})=>[x(r(e.city?e.city+", ":"")+r(e.state||"")+". ",1)]),"cell-person_type":i(({item:e})=>[n("span",{class:y(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium capitalize",e.person_type=="member"?"bg-emerald-200 text-emerald-700":e.person_type=="resident"?"bg-sky-200 text-sky-700":"bg-gray-200 text-gray-700"])},r(e.person_type==="member"?"Miembro CMEC":"")+" "+r(e.person_type==="guest"?"Invitado":"")+" "+r(e.person_type==="resident"?"Residente":""),3)]),"cell-status":i(({item:e})=>[n("span",{class:y(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium capitalize",e.status=="pending"?"bg-amber-200 text-amber-700":e.status=="paid"?"bg-emerald-200 text-emerald-700":"bg-sky-200 text-sky-700"])},r(e.status==="paid"?"Pagado":"")+" "+r(e.status==="pending"?"Pendiente":"")+" "+r(e.status==="free"?"Gratis":""),3)]),"cell-did_attend":i(({item:e})=>[n("span",{class:y(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium capitalize",e.did_attend?"bg-emerald-200 text-emerald-700":"bg-orange-200 text-orange-700"])},r(e.did_attend?"Sí":"No"),3)]),"cell-event_name":i(({item:e})=>[x(r((e.event.topic||e.event.name)??"N/A"),1)]),actionButtons:i(({item:e})=>[n("button",{title:"Ver diploma",onClick:R=>A(e),class:"p-2 rounded-lg bg-amber-20 text-amber-500 hover:bg-amber-600 hover:text-white transition-colors border border-amber-100 hover:border-amber-600"},[...t[6]||(t[6]=[n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"text-8xl w-4 h-4"},[n("g",{fill:"none"},[n("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002-.071.035-.02.004-.014-.004-.071-.035q-.016-.005-.024.005l-.004.01-.017.428.005.02.01.013.104.074.015.004.012-.004.104-.074.012-.016.004-.017-.017-.427q-.004-.016-.017-.018m.265-.113-.013.002-.185.093-.01.01-.003.011.018.43.005.012.008.007.201.093q.019.005.029-.008l.004-.014-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014-.034.614q.001.018.017.024l.015-.002.201-.093.01-.008.004-.011.017-.43-.003-.012-.01-.01z"}),n("path",{fill:"currentColor",d:"M13.586 2a2 2 0 0 1 1.284.467l.13.119L19.414 7a2 2 0 0 1 .578 1.238l.008.176V20a2 2 0 0 1-1.85 1.995L18 22H6a2 2 0 0 1-1.995-1.85L4 20V4a2 2 0 0 1 1.85-1.995L6 2zM12 4H6v16h12V10h-4.5A1.5 1.5 0 0 1 12 8.5zm-.707 7.173a1 1 0 0 1 1.32-.083l.094.083 2.121 2.121a1 1 0 0 1-1.32 1.498l-.094-.084-.414-.414V17a1 1 0 0 1-1.993.117L11 17v-2.706l-.414.414a1 1 0 0 1-1.498-1.32l.084-.094zM14 4.414V8h3.586z"})])],-1)])],8,U)]),_:1},8,["paginator"]),p(I,{show:m.value,"event-name":a.eventName,events:a.events,errors:a.errors,onClose:t[0]||(t[0]=e=>m.value=!1),onSuccess:z},null,8,["show","event-name","events","errors"]),p(H,{show:f.value,"event-name":a.eventName,data:u.value,events:a.events,errors:a.errors,onClose:t[1]||(t[1]=e=>f.value=!1),onSuccess:T},null,8,["show","event-name","data","events","errors"]),p(P,{show:b.value,attendee:u.value,onClose:t[2]||(t[2]=e=>b.value=!1)},null,8,["show","attendee"])])]),p(L,{show:s(o).show,message:s(o).message,title:s(o).title,type:s(o).type,buttonText:s(o).buttonText,cancelText:s(o).cancelText,onConfirm:t[3]||(t[3]=e=>s(o).onConfirm?s(o).onConfirm():s(c)()),onCancel:t[4]||(t[4]=e=>s(o).onCancel?s(o).onCancel():s(c)()),onClose:t[5]||(t[5]=e=>s(c)())},null,8,["show","message","title","type","buttonText","cancelText"])],64))}});export{oe as default};
