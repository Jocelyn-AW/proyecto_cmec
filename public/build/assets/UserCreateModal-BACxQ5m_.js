import{c as C,w as c,d as o,f as a,k as d,v as u,n as p,o as f,g as h,t as b,j as M,x as v,p as V,s as B}from"./app-DCfC6S3v.js";import{_ as N}from"./Modal-CxU6VbmP.js";const U={class:"p-6 space-y-4"},j={key:0,class:"mt-1 text-xs text-red-500"},E=["disabled"],S=["disabled"],F={__name:"UserCreateModal",props:{show:{type:Boolean,default:!1}},emits:["close","created","warning","error","info"],setup(g,{emit:x}){const l=x,n=v(!1),r=v({name:"",email:"",password:"",password_confirmation:""}),t=V(()=>!r.value.password&&!r.value.password_confirmation?null:r.value.password!==r.value.password_confirmation?"Las contraseñas no coinciden":null),w=()=>{r.value={name:"",email:"",password:"",password_confirmation:""}},i=()=>{w(),l("close")},y=()=>{const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*";let e="";for(let s=0;s<12;s++)e+=m.charAt(Math.floor(Math.random()*m.length));r.value.password=e,r.value.password_confirmation=e},k=()=>{if(!r.value.name||!r.value.email||!r.value.password){l("info","Por favor completa todos los campos requeridos");return}if(t.value){l("warning",t.value);return}n.value=!0,B.post("/users",r.value,{preserveScroll:!0,onSuccess:()=>{i(),l("created")},onError:()=>{l("error","Error al crear el usuario")},onFinish:()=>{n.value=!1}})};return(m,e)=>(f(),C(N,{show:g.show,onClose:i,maxWidth:"lg"},{title:c(()=>[...e[4]||(e[4]=[a("Crear usuario",-1)])]),footer:c(()=>[o("button",{onClick:i,disabled:n.value,class:"rounded-md border border-transparent py-2 px-4 text-sm text-slate-600 transition-all hover:bg-slate-100 disabled:opacity-50"}," Cancelar ",8,E),o("button",{onClick:k,disabled:n.value||!!t.value,class:"rounded-md bg-green-600 py-2 px-4 text-sm text-white transition-all shadow-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},b(n.value?"Creando...":"Crear usuario"),9,S)]),default:c(()=>[o("div",U,[o("div",null,[e[5]||(e[5]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a(" Nombre del usuario "),o("span",{class:"text-red-500"},"*")],-1)),d(o("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.value.name=s),type:"text",placeholder:"Nombre completo",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-1 focus:ring-green-500"},null,512),[[u,r.value.name]])]),o("div",null,[e[6]||(e[6]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a(" Correo electrónico "),o("span",{class:"text-red-500"},"*")],-1)),d(o("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.email=s),type:"email",placeholder:"correo@ejemplo.com",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-1 focus:ring-green-500"},null,512),[[u,r.value.email]])]),o("div",null,[o("div",{class:"flex items-center justify-between mb-1"},[e[8]||(e[8]=o("label",{class:"block text-sm font-medium text-gray-700"},[a(" Contraseña "),o("span",{class:"text-red-500"},"*")],-1)),o("button",{type:"button",onClick:y,class:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700 font-medium transition-colors"},[...e[7]||(e[7]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3.5 h-3.5"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),a(" Generar contraseña ",-1)])])]),d(o("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.password=s),type:"text",placeholder:"••••••••",class:p(["block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-1 focus:ring-green-500 font-mono",{"border-red-500 focus:border-red-500 focus:ring-red-500":t.value}])},null,2),[[u,r.value.password]])]),o("div",null,[e[9]||(e[9]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[a(" Confirmar contraseña "),o("span",{class:"text-red-500"},"*")],-1)),d(o("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.value.password_confirmation=s),type:"text",placeholder:"••••••••",class:p(["block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:outline-none focus:ring-1 focus:ring-green-500 font-mono",{"border-red-500 focus:border-red-500 focus:ring-red-500":t.value}])},null,2),[[u,r.value.password_confirmation]]),t.value?(f(),h("p",j,b(t.value),1)):M("",!0)])])]),_:1},8,["show"]))}};export{F as default};
