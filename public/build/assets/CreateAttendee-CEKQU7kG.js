import{E as L,B as T,z as y,c as $,w as N,d as t,t as u,k as d,o as r,g as n,F as w,q as k,y as b,j as p,v,b as z,n as G,G as R,p as C,x as j,s as q}from"./app-IggChIWS.js";import{_ as H}from"./AuthenticatedLayout-CsDyOoFW.js";import{u as I}from"./useAlert-GbgKIWpm.js";import{s as O,_ as J}from"./useStatesAndCities-CBCPwn9Z.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BoklzHPy.js";const K={class:"space-y-4"},Q={class:"block text-sm font-medium text-gray-700 mb-1"},W=["value"],X={key:0,class:"text-red-500 text-xs flex justify-end"},Y={key:0,class:"text-red-500 text-xs flex justify-end"},Z={key:0,class:"text-red-500 text-xs flex justify-end"},h={key:0,class:"text-red-500 text-xs flex justify-end"},ee={class:"flex gap-2 w-full"},te=["value"],se=["disabled"],oe=["value"],le={key:0,class:"text-red-500 text-xs flex justify-end"},re={key:0,class:"text-red-500 text-xs flex justify-end"},ne={key:0},ae={key:0,class:"text-red-500 text-xs flex justify-end"},ue={class:"flex gap-2 w-full"},ie=["value"],de={key:0,class:"text-red-500 text-xs flex justify-end"},pe={class:"flex justify-end gap-2"},xe=Object.assign({layout:H},{__name:"CreateAttendee",props:{events:{type:Object,default:()=>({})},eventName:{type:String,default:""},show:{type:Boolean,default:!1},flash:{type:Object,default:()=>({})},auth:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})}},emits:["close","success","error"],setup(g,{emit:B}){const{success:E,errorA:F,warning:A}=I(),c=j(""),x=j(""),P=C(()=>c.value?O[c.value]:[]),i=g,f=R(),l=C(()=>f.props.errors||i.errors||{}),_=B,m=j(null),S=C(()=>!m.value||!s.person_type?"":{member:m.value.member_price,guest:m.value.guest_price,resident:m.value.resident_price}[s.person_type]??s.price);L(()=>{(f.props.success||i.flash.success)&&E(f.props.success||i.flash.success),(f.props.error||i.flash.error)&&F(f.props.error||i.flash.error),(f.props.warning||i.flash.warning)&&A(f.props.warning||i.flash.warning)});const V=(a=5)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let o="";for(let U=0;U<a;U++)o+=e.charAt(Math.floor(Math.random()*e.length));return o},s=T({name:"",email:"",phone:"",event_id:"",event_type:i.eventName.toLowerCase(),state:"",city:"",person_type:"",folio:V(),status:"",price:"",cmec_member_id:null}),M=()=>{s.name="",s.email="",s.phone="",s.event_id="",s.event_type=i.eventName.toLowerCase(),s.state="",s.city="",s.person_type="",s.folio=V(),s.status="",s.cmec_member_id=null,s.price="",m.value=""},D=()=>{switch(s.event_id=m?.value?.id,s.event_type){case"curso":s.event_type="course";break;case"congreso":s.event_type="conference";break;case"webinar":s.event_type="webinar";break;default:s.event_type="course"}q.post(route("attendees.store"),s,{onSuccess:()=>{M(),_("success")},onError:()=>{}})};return y(()=>s.person_type,a=>{a&&(a==="member"?s.cmec_member_id="":s.cmec_member_id=null)}),y(S,a=>{s.price=a}),y(()=>i.show,a=>{a&&M()}),y(c,a=>{x.value="",s.state=a}),y(x,a=>{s.city=a}),(a,e)=>(r(),$(J,{show:g.show,size:"xl",onClose:e[11]||(e[11]=o=>_("close"))},{footer:N(()=>[t("div",pe,[t("button",{type:"button",class:"rounded-lg border px-4 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:e[10]||(e[10]=o=>_("close"))}," Cancelar "),t("button",{type:"button",class:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",onClick:D}," Guardar ")])]),default:N(()=>[t("div",K,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Nuevo participante",-1)),t("div",null,[t("label",Q,u(i.eventName),1),d(t("select",{name:"event_id",id:"event_id","onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[12]||(e[12]=t("option",{value:""},"Seleccionar curso",-1)),(r(!0),n(w,null,k(g.events,o=>(r(),n("option",{key:o.id,value:o},u(o.name||o.topic),9,W))),128))],512),[[b,m.value]]),l.value?.event_id?(r(),n("span",X,u(l.value?.event_id),1)):p("",!0)]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre médico (se mostrará en el diploma)",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.name=o),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,s.name]]),l.value?.name?(r(),n("span",Y,u(l.value?.name),1)):p("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Correo electrónico",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.email=o),type:"email",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,s.email]]),l.value?.email?(r(),n("span",Z,u(l.value?.email),1)):p("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Teléfono",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.phone=o),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,s.phone]]),l.value?.phone?(r(),n("span",h,u(l.value?.phone),1)):p("",!0)]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Origen",-1)),t("div",ee,[d(t("select",{name:"state",id:"state","onUpdate:modelValue":e[4]||(e[4]=o=>c.value=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[16]||(e[16]=t("option",{value:""},"Seleccionar estado",-1)),(r(!0),n(w,null,k(Object.keys(z(O)),o=>(r(),n("option",{key:o,value:o},u(o),9,te))),128))],512),[[b,c.value]]),d(t("select",{name:"event_id",id:"event_id","onUpdate:modelValue":e[5]||(e[5]=o=>x.value=o),disabled:!c.value,class:G([c.value?"":"cursor-not-allowed","w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"])},[e[17]||(e[17]=t("option",{value:""},"Seleccionar ciudad",-1)),(r(!0),n(w,null,k(P.value,o=>(r(),n("option",{key:o,value:o},u(o),9,oe))),128))],10,se),[[b,x.value]])]),l.value?.city||l.value?.state?(r(),n("span",le,u(l.value?.city||l.value?.state),1)):p("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipo de participante",-1)),d(t("select",{name:"person_type",id:"person_type","onUpdate:modelValue":e[6]||(e[6]=o=>s.person_type=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[19]||(e[19]=[t("option",{value:"",selected:""},"Seleccionar tipo",-1),t("option",{value:"member"},"Miembro CMEC",-1),t("option",{value:"resident"},"Residente",-1),t("option",{value:"guest"},"No miembro (invitado)",-1)])],512),[[b,s.person_type]]),l.value?.person_type?(r(),n("span",re,u(l.value?.person_type),1)):p("",!0)]),s.person_type=="member"?(r(),n("div",ne,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Folio de miembro CMEC",-1)),d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.cmec_member_id=o),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,s.cmec_member_id]]),l.value?.cmec_member_id?(r(),n("span",ae,u(l.value?.cmec_member_id),1)):p("",!0)])):p("",!0),e[26]||(e[26]=t("hr",{class:"my-2"},null,-1)),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Detalles de Pago",-1)),t("div",ue,[t("input",{value:S.value,type:"number",min:"0",step:"0.01",class:"grow rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Cantidad a pagar"},null,8,ie),d(t("select",{name:"status",id:"status","onUpdate:modelValue":e[8]||(e[8]=o=>s.status=o),class:"rounded-lg grow border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[22]||(e[22]=[t("option",{value:"",selected:""},"Seleccionar estatus",-1),t("option",{value:"paid"},"Pagado",-1),t("option",{value:"pending"},"Pendiente",-1)])],512),[[b,s.status]])]),l.value?.status?(r(),n("span",de,u(l.value?.status),1)):p("",!0)]),e[27]||(e[27]=t("hr",{class:"my-2"},null,-1)),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Folio de Acceso",-1)),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>s.folio=o),type:"text",disabled:"",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-100 cursor-not-allowed"},null,512),[[v,s.folio]])])])]),_:1},8,["show"]))}});export{xe as default};
