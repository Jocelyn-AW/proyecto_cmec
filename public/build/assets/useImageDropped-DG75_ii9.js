import{g as i,d as t,F as z,t as l,L as $,e as L,n as B,q as U,j as q,x as f,p as V,o as n}from"./app-Cw2X6vIM.js";const Q={class:"w-full"},E=["accept","multiple","disabled"],H={key:0,class:"relative group"},N={class:"w-full h-48 overflow-hidden rounded-lg border border-gray-300"},I=["src","alt"],G={class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-3"},O=["disabled"],R=["disabled"],W={key:1,class:"relative group"},J={class:"flex items-center gap-3 rounded-lg border border-gray-300 bg-gray-50 p-4"},T={class:"flex-1 min-w-0"},X={class:"truncate text-sm font-medium text-gray-700"},Y={class:"text-xs text-gray-400"},Z={class:"flex gap-2"},_=["disabled"],ee=["disabled"],te=["onKeydown"],ae={class:"flex flex-col items-center gap-2"},se={class:"text-xs text-gray-400"},re={class:"grid grid-cols-2 gap-3 sm:grid-cols-3 md:grid-cols-5"},oe=["src","alt"],ie={key:1,class:"flex h-full w-full flex-col items-center justify-center bg-gray-100 p-2"},ne={class:"mt-1 text-xs font-medium text-gray-500"},le={class:"text-[10px] text-gray-400 truncate max-w-full px-1"},de=["disabled","title","onClick"],ce={class:"sr-only"},ue={class:"absolute bottom-1.5 left-1.5 rounded bg-black/60 px-1.5 py-0.5 text-xs font-medium text-white"},ge=["onKeydown"],ve={class:"mt-1 text-xs text-gray-500"},he={class:"mt-2 flex items-center justify-between"},me={class:"text-xs text-gray-400"},be={class:"text-xs text-gray-400"},pe={key:0,class:"mt-2 flex justify-end"},fe=["disabled"],xe={__name:"Dropzone",props:{multiple:{type:Boolean,default:!1},preview:{type:[String,Object],default:null},previews:{type:Array,default:()=>[]},maxFiles:{type:Number,default:10},isDragging:{type:Boolean,default:!1},accept:{type:String,default:"image/jpeg,image/png,image/jpg,image/webp"},hint:{type:String,default:"JPG, PNG, WEBP (max. 1MB)"},label:{type:String,default:"Arrastra tu imagen aqui o haz clic para seleccionar"},disabled:{type:Boolean,default:!1},previewAlt:{type:String,default:"Vista previa"}},emits:["change","drop","drag-enter","drag-leave","remove","remove-at"],setup(e,{emit:w}){const b=s=>typeof s=="string",y=s=>s<1024?`${s} B`:s<1048576?`${(s/1024).toFixed(1)} KB`:`${(s/1048576).toFixed(1)} MB`,h=s=>{const o=s.split(".");return o.length>1?o.pop().toUpperCase():"???"},d=e,u=w,v=f(null),p=V(()=>d.multiple?d.previews.length<d.maxFiles:!d.preview),r=()=>{d.disabled||v.value?.click()},M=s=>{u("change",s)},x=s=>{d.disabled||(s.preventDefault(),u("drop",s))},k=s=>{s.preventDefault()},D=()=>{d.disabled||u("drag-enter")},C=()=>{u("drag-leave")},F=()=>{u("remove")},S=s=>{u("remove-at",s)};return(s,o)=>(n(),i("div",Q,[t("input",{ref_key:"fileInput",ref:v,type:"file",accept:e.accept,multiple:e.multiple,class:"hidden",disabled:e.disabled,onChange:M},null,40,E),e.multiple?(n(),i(z,{key:1},[t("div",re,[(n(!0),i(z,null,U(e.previews,(j,m)=>(n(),i("div",{key:m,class:"group relative aspect-square overflow-hidden rounded-lg border border-gray-300"},[b(j)?(n(),i("img",{key:0,src:j,alt:`${e.previewAlt} ${m+1}`,class:"h-full w-full object-cover"},null,8,oe)):(n(),i("div",ie,[o[2]||(o[2]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1)),t("span",ne,l(h(j.name)),1),t("span",le,l(j.name),1)])),t("button",{type:"button",disabled:e.disabled,class:"absolute top-1.5 right-1.5 rounded-full bg-black/60 p-1 text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/80 disabled:opacity-50",title:`Quitar archivo ${m+1}`,onClick:a=>S(m)},[o[3]||(o[3]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)),t("span",ce,"Quitar archivo "+l(m+1),1)],8,de),t("span",ue,l(m+1),1)]))),128)),p.value?(n(),i("div",{key:0,role:"button",tabindex:"0",class:B(["flex aspect-square flex-col items-center justify-center rounded-lg border-2 border-dashed cursor-pointer transition-colors",e.isDragging?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50 hover:border-gray-400 hover:bg-gray-100",e.disabled?"opacity-50 cursor-not-allowed":""]),onClick:r,onDrop:x,onDragover:k,onDragenter:D,onDragleave:C,onKeydown:[$(r,["enter"]),$(L(r,["prevent"]),["space"])]},[(n(),i("svg",{class:B(["h-8 w-8 text-gray-400",{"text-blue-500":e.isDragging}]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[...o[4]||(o[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"},null,-1)])],2)),t("p",ve,l(e.isDragging?"Suelta aqui":"Agregar"),1)],42,ge)):q("",!0)]),t("div",he,[t("p",me,l(e.hint),1),t("p",be,l(e.previews.length)+" / "+l(e.maxFiles),1)]),e.previews.length>1?(n(),i("div",pe,[t("button",{type:"button",disabled:e.disabled,class:"text-xs text-red-500 hover:text-red-700 transition-colors disabled:opacity-50",onClick:F}," Quitar todas ",8,fe)])):q("",!0)],64)):(n(),i(z,{key:0},[e.preview&&b(e.preview)?(n(),i("div",H,[t("div",N,[t("img",{src:e.preview,alt:e.previewAlt,class:"w-full h-full object-cover"},null,8,I)]),t("div",G,[t("button",{type:"button",disabled:e.disabled,class:"rounded-md bg-white px-3 py-1.5 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 transition-colors disabled:opacity-50",onClick:r}," Cambiar ",8,O),t("button",{type:"button",disabled:e.disabled,class:"rounded-md bg-red-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-red-700 transition-colors disabled:opacity-50",onClick:F}," Quitar ",8,R)])])):e.preview&&!b(e.preview)?(n(),i("div",W,[t("div",J,[o[0]||(o[0]=t("div",{class:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-gray-200"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})])],-1)),t("div",T,[t("p",X,l(e.preview.name),1),t("p",Y,l(h(e.preview.name))+" Â· "+l(y(e.preview.size)),1)]),t("div",Z,[t("button",{type:"button",disabled:e.disabled,class:"rounded-md bg-white px-3 py-1.5 text-sm font-medium text-gray-700 shadow-sm border border-gray-300 hover:bg-gray-50 transition-colors disabled:opacity-50",onClick:r}," Cambiar ",8,_),t("button",{type:"button",disabled:e.disabled,class:"rounded-md bg-red-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-red-700 transition-colors disabled:opacity-50",onClick:F}," Quitar ",8,ee)])])])):(n(),i("div",{key:2,role:"button",tabindex:"0",class:B(["w-full rounded-lg border-2 border-dashed p-6 text-center cursor-pointer transition-colors",e.isDragging?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50 hover:border-gray-400 hover:bg-gray-100",e.disabled?"opacity-50 cursor-not-allowed":""]),onClick:r,onDrop:x,onDragover:k,onDragenter:D,onDragleave:C,onKeydown:[$(r,["enter"]),$(L(r,["prevent"]),["space"])]},[t("div",ae,[(n(),i("svg",{class:B(["h-10 w-10 text-gray-400",{"text-blue-500":e.isDragging}]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[...o[1]||(o[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"},null,-1)])],2)),t("p",{class:B(["text-sm text-gray-600",{"text-blue-600":e.isDragging}])},l(e.isDragging?"Suelta el archivo aqui":e.label),3),t("p",se,l(e.hint),1)])],42,te))],64))]))}};function we({maxSizeMB:e=1,maxFiles:w=10,multiple:b=!1,acceptedTypes:y=[],onError:h}={}){const d=f(null),u=f(null),v=f([]),p=f([]),r=f(!1),M=a=>a.type.startsWith("image/"),x=a=>{if(!a)return!1;if(y.length>0&&!y.includes(a.type)){const g=y.map(A=>A.split("/")[1].toUpperCase());return h?.(`Formato no permitido. Usa: ${g.join(", ")}`),!1}const c=e*1024*1024;return a.size>c?(h?.(`El archivo no debe superar ${e}MB`),!1):!0},k=a=>M(a)?new Promise(c=>{const g=new FileReader;g.onload=A=>c(A.target.result),g.readAsDataURL(a)}):Promise.resolve({isFile:!0,name:a.name,size:a.size,type:a.type}),D=async a=>x(a)?(d.value=a,u.value=await k(a),!0):!1,C=async a=>{const c=Array.from(a),g=w-v.value.length;if(g<=0){h?.(`Maximo ${w} archivos permitidos`);return}const A=c.slice(0,g);c.length>g&&h?.(`Solo se agregaron ${g} de ${c.length} archivos (maximo ${w})`);for(const P of A){if(!x(P))continue;const K=await k(P);v.value.push(P),p.value.push(K)}};return{file:d,preview:u,files:v,previews:p,removeAt:a=>{v.value.splice(a,1),p.value.splice(a,1)},isDragging:r,handleChange:async a=>{if(b)await C(a.target.files),a.target.value="";else{const c=a.target.files[0];await D(c)||(a.target.value="")}},handleDrop:async a=>{if(r.value=!1,b)await C(a.dataTransfer?.files||[]);else{const c=a.dataTransfer?.files[0];await D(c)}},handleDragEnter:()=>{r.value=!0},handleDragLeave:()=>{r.value=!1},reset:()=>{d.value=null,u.value=null,v.value=[],p.value=[],r.value=!1}}}function ke(e={}){return we({acceptedTypes:["image/jpeg","image/png","image/jpg","image/webp"],...e})}export{xe as _,we as a,ke as u};
