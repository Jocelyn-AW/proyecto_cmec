import{I as L,B as T,z as b,c as $,w as N,d as t,t as i,k as d,o as r,g as a,F as _,q as k,y,v as g,j as p,b as z,n as R,J as G,p as C,x as j,s as I}from"./app-HE2xJTpK.js";import{_ as J}from"./AuthenticatedLayout-BW9za3Zh.js";import{u as q}from"./useAlert-CztCJmqn.js";import{s as O,_ as H}from"./useStatesAndCities-DqT8EIkQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-aoiOxo1b.js";const K={class:"space-y-4"},Q={class:"block text-sm font-medium text-gray-700 mb-1"},W=["value"],X={key:0,class:"text-red-500 text-xs flex justify-end"},Y={key:0,class:"text-red-500 text-xs flex justify-end"},Z={key:0,class:"text-red-500 text-xs flex justify-end"},h={class:"flex gap-2 w-full"},ee=["value"],te=["disabled"],se=["value"],oe={key:0,class:"text-red-500 text-xs flex justify-end"},le={key:0,class:"text-red-500 text-xs flex justify-end"},re={key:0},ne={key:0,class:"text-red-500 text-xs flex justify-end"},ae={class:"flex gap-2 w-full"},ue=["value"],ie={key:0,class:"text-red-500 text-xs flex justify-end"},de={class:"flex justify-end gap-2"},ge=Object.assign({layout:J},{__name:"CreateAttendee",props:{events:{type:Object,default:()=>({})},eventName:{type:String,default:""},show:{type:Boolean,default:!1},flash:{type:Object,default:()=>({})},auth:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})}},emits:["close","success","error"],setup(v,{emit:B}){const{success:F,errorA:A,warning:E}=q(),m=j(""),x=j(""),P=C(()=>m.value?O[m.value]:[]),u=v,c=G(),l=C(()=>c.props.errors||u.errors||{}),w=B,f=j(null),S=C(()=>!f.value||!s.person_type?"":{member:f.value.member_price,guest:f.value.guest_price,resident:f.value.resident_price}[s.person_type]??s.price);L(()=>{(c.props.success||u.flash.success)&&F(c.props.success||u.flash.success),(c.props.error||u.flash.error)&&A(c.props.error||u.flash.error),(c.props.warning||u.flash.warning)&&E(c.props.warning||u.flash.warning)});const V=(n=5)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let o="";for(let U=0;U<n;U++)o+=e.charAt(Math.floor(Math.random()*e.length));return o},s=T({name:"",email:"",phone:"",event_id:"",event_type:u.eventName.toLowerCase(),state:"",city:"",person_type:"",folio:V(),status:"",price:"",cmec_member_id:null}),M=()=>{s.name="",s.email="",s.phone="",s.event_id="",s.event_type=u.eventName.toLowerCase(),s.state="",s.city="",s.person_type="",s.folio=V(),s.status="",s.cmec_member_id=null,s.price="",f.value=null},D=()=>{switch(s.event_type){case"curso":s.event_type="course";break;case"congreso":s.event_type="conference";break;case"webinar":s.event_type="webinar";break;default:s.event_type="course"}I.post(route("attendees.store"),s,{onSuccess:()=>{M(),w("success")},onError:()=>{}})};return b(()=>s.person_type,n=>{n&&(n==="member"?s.cmec_member_id="":s.cmec_member_id=null)}),b(S,n=>{s.price=n}),b(()=>u.show,n=>{n&&M()}),b(m,n=>{x.value="",s.state=n}),b(x,n=>{s.city=n}),(n,e)=>(r(),$(H,{show:v.show,size:"xl",onClose:e[11]||(e[11]=o=>w("close"))},{footer:N(()=>[t("div",de,[t("button",{type:"button",class:"rounded-lg border px-4 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:e[10]||(e[10]=o=>w("close"))}," Cancelar "),t("button",{type:"button",class:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",onClick:D}," Guardar ")])]),default:N(()=>[t("div",K,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Nuevo participante",-1)),t("div",null,[t("label",Q,i(u.eventName),1),d(t("select",{name:"event_id",id:"event_id","onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[12]||(e[12]=t("option",{value:""},"Seleccionar curso",-1)),(r(!0),a(_,null,k(v.events,o=>(r(),a("option",{key:o.id,value:o},i(o.name||o.topic),9,W))),128))],512),[[y,f.value]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre médico (se mostrará en el diploma)",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.name=o),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,s.name]]),l.value?.name?(r(),a("span",X,i(l.value?.name),1)):p("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Correo electrónico",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.email=o),type:"email",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,s.email]]),l.value?.email?(r(),a("span",Y,i(l.value?.email),1)):p("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Teléfono",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.phone=o),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,s.phone]]),l.value?.phone?(r(),a("span",Z,i(l.value?.phone),1)):p("",!0)]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Origen",-1)),t("div",h,[d(t("select",{name:"state",id:"state","onUpdate:modelValue":e[4]||(e[4]=o=>m.value=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[16]||(e[16]=t("option",{value:""},"Seleccionar estado",-1)),(r(!0),a(_,null,k(Object.keys(z(O)),o=>(r(),a("option",{key:o,value:o},i(o),9,ee))),128))],512),[[y,m.value]]),d(t("select",{name:"event_id",id:"event_id","onUpdate:modelValue":e[5]||(e[5]=o=>x.value=o),disabled:!m.value,class:R([m.value?"":"cursor-not-allowed","w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"])},[e[17]||(e[17]=t("option",{value:""},"Seleccionar ciudad",-1)),(r(!0),a(_,null,k(P.value,o=>(r(),a("option",{key:o,value:o},i(o),9,se))),128))],10,te),[[y,x.value]])]),l.value?.city||l.value?.state?(r(),a("span",oe,i(l.value?.city||l.value?.state),1)):p("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipo de participante",-1)),d(t("select",{name:"person_type",id:"person_type","onUpdate:modelValue":e[6]||(e[6]=o=>s.person_type=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[19]||(e[19]=[t("option",{value:"",selected:""},"Seleccionar tipo",-1),t("option",{value:"member"},"Miembro CMEC",-1),t("option",{value:"resident"},"Residente",-1),t("option",{value:"guest"},"No miembro (invitado)",-1)])],512),[[y,s.person_type]]),l.value?.person_type?(r(),a("span",le,i(l.value?.person_type),1)):p("",!0)]),s.person_type=="member"?(r(),a("div",re,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Folio de miembro CMEC",-1)),d(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.cmec_member_id=o),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,s.cmec_member_id]]),l.value?.cmec_member_id?(r(),a("span",ne,i(l.value?.cmec_member_id),1)):p("",!0)])):p("",!0),e[26]||(e[26]=t("hr",{class:"my-2"},null,-1)),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Detalles de Pago",-1)),t("div",ae,[t("input",{value:S.value,type:"number",min:"0",step:"0.01",class:"grow rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Cantidad a pagar"},null,8,ue),d(t("select",{name:"status",id:"status","onUpdate:modelValue":e[8]||(e[8]=o=>s.status=o),class:"rounded-lg grow border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[22]||(e[22]=[t("option",{value:"",selected:""},"Seleccionar estatus",-1),t("option",{value:"paid"},"Pagado",-1),t("option",{value:"pending"},"Pendiente",-1)])],512),[[y,s.status]])]),l.value?.status?(r(),a("span",ie,i(l.value?.status),1)):p("",!0)]),e[27]||(e[27]=t("hr",{class:"my-2"},null,-1)),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Folio de Acceso",-1)),d(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>s.folio=o),type:"text",disabled:"",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-100 cursor-not-allowed"},null,512),[[g,s.folio]])])])]),_:1},8,["show"]))}});export{ge as default};
