import{B as E,z as M,s as p,E as A,g as b,a as m,b as s,h as H,d as r,w as n,k as y,v,y as B,o as x,j as G,n as u,t as d,f as w,F as I,G as L}from"./app-IggChIWS.js";import{_ as N}from"./AuthenticatedLayout-CsDyOoFW.js";import{u as P}from"./useAlert-GbgKIWpm.js";import{_ as U}from"./Alerta-CjNrtwdw.js";import{_ as W}from"./DataTable-2YN-GWnB.js";import{C as Y,e as R}from"./flatpickr-ROq2-9G-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BoklzHPy.js";const X={class:"p-6 border-t border-gray-100 dark:border-gray-800 sm:p-6"},J={class:"space-y-5"},K=["title"],Q=["title"],Z=["href"],ee={key:1,class:"text-gray-400 text-xs"},te=["title","onClick"],re=["onClick"],ae={class:"flex flex-wrap items-center gap-3"},ue=Object.assign({layout:N},{__name:"Index",props:{webinars:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})},flash:{type:Object,default:()=>({})},auth:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})}},setup(k){const{alertState:i,success:_,errorA:C,warning:h,hideAlert:g}=P(),l=k,c=L(),a=E({search:l.filters.search??"",date:l.filters.date??"",organized_by:l.filters.organized_by??"",status:l.filters.status??""});let f=null;M(a,()=>{clearTimeout(f),f=setTimeout(()=>V(),350)});const V=()=>{const o=Object.fromEntries(Object.entries(a).filter(([,t])=>t!==""&&t!==null));p.get(route("webinars.index"),o,{preserveState:!0,preserveScroll:!0,only:["webinars","filters"]})},z=()=>{a.search="",a.date="",a.organized_by="",a.status=""},T=()=>Object.values(a).some(o=>o!==""&&o!==null);A(()=>{(c.props.success||l.flash.success)&&_(c.props.success||l.flash.success),(c.props.error||l.flash.error)&&C(c.props.error||l.flash.error),(c.props.warning||l.flash.warning)&&h(c.props.warning||l.flash.warning)});const F={locale:R.Spanish,dateFormat:"Y-m-d",altInput:!0,altFormat:"F j, Y",wrap:!1},O=()=>{p.get(route("webinars.new"))},j=o=>{p.get(route("webinars.edit",o.id),{},{preserveState:!1})},D=o=>{h("¿Confirma que desea eliminar este webinar? Esta acción no se puede deshacer.",{title:"Eliminar webinar",buttonText:"Sí, eliminar",cancelText:"Cancelar",onConfirm:()=>{g(),p.delete(route("webinars.delete",o))}})},S=o=>{o.program_url?window.open(o.program_url,"_blank"):h("Este webinar no tiene un programa PDF asociado.",{title:"Sin programa",buttonText:"Aceptar"})},$=o=>{p.get(route("webinars.gallery",o.id))};return(o,t)=>(x(),b(I,null,[m(s(H),{title:"Webinars"}),r("div",X,[r("div",J,[t[10]||(t[10]=r("div",null,[r("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Webinars"),r("p",{class:"text-sm text-gray-500"},"Administra los webinars de tu aplicación desde esta sección")],-1)),m(W,{columns:[{label:"Título",key:"topic"},{label:"Fecha",key:"date"},{label:"Descripción",key:"description"},{label:"Duración",key:"duration"},{label:"Organiza",key:"organized_by"},{label:"Costo Miembro",key:"member_price"},{label:"Costo Residente",key:"resident_price"},{label:"Costo Invitado",key:"guest_price"},{label:"Link",key:"link"},{label:"Estado",key:"is_active",align:"center"}],paginator:l.webinars,searchable:!1,"per-page-options":[5,10,15],"allow-create":!1,"allow-actions":!0,"allow-edit":!0,"allow-delete":!0,onEdit:j,onDelete:D,only:["webinars"]},{"cell-topic":n(({item:e})=>[r("span",{title:e.topic,class:"block max-w-[200px] truncate"},d(e.topic),9,K)]),"cell-description":n(({item:e})=>[r("span",{title:e.description,class:"block max-w-[200px] truncate"},d(e.description),9,Q)]),"cell-date":n(({item:e})=>[w(d(new Date(e.date).toLocaleDateString("es-MX",{day:"2-digit",month:"short",year:"numeric"})),1)]),"cell-duration":n(({item:e})=>[w(d(e.duration)+" "+d(e.duration>1?"horas":"hora"),1)]),"cell-member_price":n(({item:e})=>[r("span",{class:u(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium",e.member_price=="0.00"?"bg-emerald-200 text-emerald-700":"bg-indigo-200 text-indigo-700"])},d(e.member_price==="0.00"?"Gratis":"$"+e.member_price),3)]),"cell-resident_price":n(({item:e})=>[r("span",{class:u(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium",e.resident_price=="0.00"?"bg-emerald-200 text-emerald-700":"bg-sky-200 text-sky-700"])},d(e.resident_price==="0.00"?"Gratis":"$"+e.resident_price),3)]),"cell-guest_price":n(({item:e})=>[r("span",{class:u(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium",e.guest_price=="0.00"?"bg-emerald-200 text-emerald-700":"bg-sky-200 text-sky-700"])},d(e.guest_price==="0.00"?"Gratis":"$"+e.guest_price),3)]),"cell-link":n(({item:e})=>[e.link?(x(),b("a",{key:0,href:e.link,target:"_blank",class:"text-blue-800 hover:underline text-sm"},d(e.link.length>25?e.link.substring(0,25)+"...":e.link),9,Z)):(x(),b("span",ee,"—"))]),"cell-is_active":n(({item:e})=>[r("span",{class:u(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium",e.is_active?"bg-emerald-200 text-emerald-700":"bg-gray-200 text-gray-500"])},d(e.is_active?"Activo":"Inactivo"),3)]),actionButtons:n(({item:e})=>[r("button",{title:e.program_url?"Ver programa PDF":"Sin programa PDF",onClick:q=>S(e),class:u([e.program_url?"bg-red-500 text-white border-red-500 hover:bg-red-700 hover:border-red-700":"bg-transparent text-gray-300 border-gray-200","p-2 rounded-lg transition-colors border"])},[...t[7]||(t[7]=[r("svg",{width:"18",height:"18",fill:"currentColor",class:"w-4 h-4",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},[r("path",{"fill-rule":"evenodd",d:"M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM1.6 11.85H0v3.999h.791v-1.342h.803q.43 0 .732-.173.305-.175.463-.474a1.4 1.4 0 0 0 .161-.677q0-.375-.158-.677a1.2 1.2 0 0 0-.46-.477q-.3-.18-.732-.179m.545 1.333a.8.8 0 0 1-.085.38.57.57 0 0 1-.238.241.8.8 0 0 1-.375.082H.788V12.48h.66q.327 0 .512.181.185.183.185.522m1.217-1.333v3.999h1.46q.602 0 .998-.237a1.45 1.45 0 0 0 .595-.689q.196-.45.196-1.084 0-.63-.196-1.075a1.43 1.43 0 0 0-.589-.68q-.396-.234-1.005-.234zm.791.645h.563q.371 0 .609.152a.9.9 0 0 1 .354.454q.118.302.118.753a2.3 2.3 0 0 1-.068.592 1.1 1.1 0 0 1-.196.422.8.8 0 0 1-.334.252 1.3 1.3 0 0 1-.483.082h-.563zm3.743 1.763v1.591h-.79V11.85h2.548v.653H7.896v1.117h1.606v.638z"})],-1)])],10,te),r("button",{title:"Ver galería",onClick:q=>$(e),class:"p-2 rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white transition-colors border border-indigo-100 hover:border-indigo-600"},[...t[8]||(t[8]=[r("svg",{width:"18",height:"18",fill:"currentColor",class:"w-4 h-4",viewBox:"0 0 17 17",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M13 10V0H0v13h13zM1 1h11v8h-.755L8.681 5.681 7.522 6.895 5.274 3.014 1.698 9H1zm8.982 8H2.863l2.398-4.014L7.325 8.55 8.6 7.213zM1 12v-2h11v2zm16-9v13H4v-1.984h1V15h11V4h-2V3z"})],-1)])],8,re)]),actions:n(()=>[r("div",ae,[y(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.search=e),type:"text",placeholder:"Buscar por título...",class:"px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"},null,512),[[v,a.search]]),m(s(Y),{modelValue:a.date,"onUpdate:modelValue":t[1]||(t[1]=e=>a.date=e),config:F,class:"px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",placeholder:"Fecha"},null,8,["modelValue"]),y(r("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.organized_by=e),type:"text",placeholder:"Organizador...",class:"px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"},null,512),[[v,a.organized_by]]),y(r("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.status=e),class:"px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"},[...t[9]||(t[9]=[r("option",{value:""},"Todos",-1),r("option",{value:"active"},"Activo",-1),r("option",{value:"inactive"},"Inactivo",-1)])],512),[[B,a.status]]),T()?(x(),b("button",{key:0,onClick:z,class:"px-3 py-2 text-sm text-red-600 bg-red-50 rounded-lg"}," Limpiar ")):G("",!0),r("button",{onClick:O,class:"inline-flex items-center gap-1 rounded-lg bg-green-600 px-3 py-2 text-sm font-medium text-white hover:bg-green-700"}," Nuevo ")])]),_:1},8,["paginator"])])]),m(U,{show:s(i).show,message:s(i).message,title:s(i).title,type:s(i).type,buttonText:s(i).buttonText,cancelText:s(i).cancelText,onConfirm:t[4]||(t[4]=e=>s(i).onConfirm?s(i).onConfirm():s(g)()),onCancel:t[5]||(t[5]=e=>s(i).onCancel?s(i).onCancel():s(g)()),onClose:t[6]||(t[6]=e=>s(g)())},null,8,["show","message","title","type","buttonText","cancelText"])],64))}});export{ue as default};
