import{_ as O}from"./AuthenticatedLayout-CsDyOoFW.js";import{_ as N}from"./DataTable-2YN-GWnB.js";import{E as j,g as h,a as p,b as a,h as q,d as s,w as i,n as v,t as o,o as _,f as C,F as B,G as L,x as u,s as P}from"./app-IggChIWS.js";import{u as I}from"./useAlert-GbgKIWpm.js";import{_ as F}from"./Alerta-CjNrtwdw.js";import G from"./CreateAttendee-DaHH1R1V.js";import H from"./EditAttendee-DiY-mds9.js";import U from"./UploadDiploma-Cn87eS1v.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BoklzHPy.js";import"./useStatesAndCities-CBCPwn9Z.js";import"./Modal-DP7vPZY9.js";import"./useImageDropped-ClZR24Qj.js";const R={class:"p-6 border-t border-gray-100 dark:border-gray-800 sm:p-6"},W={class:"space-y-5"},J=["onClick","disabled","title"],K={key:0},Q={key:1},X=["title"],Y=["title","onClick"],ue=Object.assign({layout:O},{__name:"Index",props:{attendees:{type:Object,default:()=>({})},events:{type:Object,default:()=>({})},eventName:{type:String,default:""},flash:{type:Object,default:()=>({})},auth:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})}},setup(k){const{alertState:r,success:b,errorA:$,warning:y,hideAlert:m}=I(),g=u(!1),f=u(!1),x=u(!1),c=u(null),w=u(null),n=k,d=L();j(()=>{(d.props.success||n.flash.success)&&b(d.props.success||n.flash.success),(d.props.error||n.flash.error)&&$(d.props.error||n.flash.error),(d.props.warning||n.flash.warning)&&y(d.props.warning||n.flash.warning)});const A=()=>{g.value=!0},T=l=>{c.value=l,f.value=!0},z=l=>{y("¿Confirma que desea eliminar a este asistente? Esta acción no se puede deshacer.",{title:"Eliminar registro",buttonText:"Sí, eliminar",cancelText:"Cancelar",onConfirm:()=>{m(),P.delete(route("attendees.delete",l))}})},E=l=>{l.diploma_url?window.open(l.diploma_url,"_blank"):(c.value=l,x.value=!0)},S=l=>{y("Todavia no implementamos esa caracteristica!")},D=()=>{b("Asistente registrado exitosamente"),g.value=!1},M=()=>{b("Asistente actualizado exitosamente"),f.value=!1,c.value=null};return(l,t)=>(_(),h(B,null,[p(a(q),{title:"Asistentes a webinars"}),s("div",R,[s("div",W,[t[7]||(t[7]=s("div",{class:""},[s("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Asistentes a webinars"),s("p",{class:"text-sm text-gray-500"},"Administra los asistentes registrados a webinars desde esta sección")],-1)),p(N,{columns:[{label:"Webinar",key:"event_name"},{label:"Asistente",key:"name"},{label:"Telefono",key:"phone"},{label:"Ciudad/Estado",key:"origin"},{label:"Tipo de Usuario",key:"person_type",align:"center"},{label:"Estatus de Pago",key:"status",align:"center"},{label:"Asistencia",key:"did_attend",align:"center"}],paginator:n.attendees,searchable:!0,"per-page-options":[10,25,50,100],"allow-create":!0,"allow-actions":!0,"allow-edit":!0,"allow-delete":!0,onCreate:A,onEdit:T,onDelete:z,only:["attendees"]},{"cell-date":i(({item:e})=>[C(o(new Date(e.date).toLocaleDateString("en-GB")),1)]),"cell-origin":i(({item:e})=>[C(o(e.city?e.city+", ":"")+o(e.state||"")+". ",1)]),"cell-person_type":i(({item:e})=>[s("span",{class:v(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium capitalize",e.person_type=="member"?"bg-emerald-200 text-emerald-700":e.person_type=="resident"?"bg-sky-200 text-sky-700":"bg-gray-200 text-gray-700"])},o(e.person_type==="member"?"Miembro CMEC":"")+" "+o(e.person_type==="guest"?"Invitado":"")+" "+o(e.person_type==="resident"?"Residente":""),3)]),"cell-status":i(({item:e})=>[s("span",{class:v(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium capitalize",e.status=="pending"?"bg-amber-200 text-amber-700":e.status=="paid"?"bg-emerald-200 text-emerald-700":"bg-sky-200 text-sky-700"])},o(e.status==="paid"?"Pagado":"")+" "+o(e.status==="pending"?"Pendiente":"")+" "+o(e.status==="free"?"Gratis":""),3)]),"cell-did_attend":i(({item:e})=>[s("button",{onClick:V=>S(e),disabled:w.value===e.id,title:e.did_attend?"Marcar como no asistió":"Marcar como asistió",class:v(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium capitalize transition-all",e.did_attend?"bg-emerald-200 text-emerald-700 hover:bg-emerald-300":"bg-orange-200 text-orange-700 hover:bg-orange-300",w.value===e.id?"opacity-50 cursor-wait":"cursor-pointer"])},[w.value===e.id?(_(),h("span",K,"...")):(_(),h("span",Q,o(e.did_attend?"Sí":"No"),1))],10,J)]),"cell-event_name":i(({item:e})=>[s("span",{title:e.event?.topic||e.event?.name,class:"block max-w-[200px] truncate"},o((e.event?.topic||e.event?.name)??"N/A"),9,X)]),actionButtons:i(({item:e})=>[s("button",{title:e.diploma_url?"Ver diploma PDF":"Subir diploma",onClick:V=>E(e),class:v([e.diploma_url?"bg-amber-500 text-white border-amber-500 hover:bg-amber-600":"bg-transparent text-gray-300 border-gray-200 hover:bg-gray-100 hover:text-gray-500","p-2 rounded-lg transition-colors border"])},[...t[6]||(t[6]=[s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4"},[s("g",{fill:"none"},[s("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002-.071.035-.02.004-.014-.004-.071-.035q-.016-.005-.024.005l-.004.01-.017.428.005.02.01.013.104.074.015.004.012-.004.104-.074.012-.016.004-.017-.017-.427q-.004-.016-.017-.018m.265-.113-.013.002-.185.093-.01.01-.003.011.018.43.005.012.008.007.201.093q.019.005.029-.008l.004-.014-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014-.034.614q.001.018.017.024l.015-.002.201-.093.01-.008.004-.011.017-.43-.003-.012-.01-.01z"}),s("path",{fill:"currentColor",d:"M13.586 2a2 2 0 0 1 1.284.467l.13.119L19.414 7a2 2 0 0 1 .578 1.238l.008.176V20a2 2 0 0 1-1.85 1.995L18 22H6a2 2 0 0 1-1.995-1.85L4 20V4a2 2 0 0 1 1.85-1.995L6 2zM12 4H6v16h12V10h-4.5A1.5 1.5 0 0 1 12 8.5zm-.707 7.173a1 1 0 0 1 1.32-.083l.094.083 2.121 2.121a1 1 0 0 1-1.32 1.498l-.094-.084-.414-.414V17a1 1 0 0 1-1.993.117L11 17v-2.706l-.414.414a1 1 0 0 1-1.498-1.32l.084-.094zM14 4.414V8h3.586z"})])],-1)])],10,Y)]),_:1},8,["paginator"]),p(G,{show:g.value,"event-name":n.eventName,events:n.events,errors:n.errors,onClose:t[0]||(t[0]=e=>g.value=!1),onSuccess:D},null,8,["show","event-name","events","errors"]),p(H,{show:f.value,"event-name":n.eventName,data:c.value,events:n.events,errors:n.errors,onClose:t[1]||(t[1]=e=>f.value=!1),onSuccess:M},null,8,["show","event-name","data","events","errors"]),p(U,{show:x.value,attendee:c.value,onClose:t[2]||(t[2]=e=>x.value=!1)},null,8,["show","attendee"])])]),p(F,{show:a(r).show,message:a(r).message,title:a(r).title,type:a(r).type,buttonText:a(r).buttonText,cancelText:a(r).cancelText,onConfirm:t[3]||(t[3]=e=>a(r).onConfirm?a(r).onConfirm():a(m)()),onCancel:t[4]||(t[4]=e=>a(r).onCancel?a(r).onCancel():a(m)()),onClose:t[5]||(t[5]=e=>a(m)())},null,8,["show","message","title","type","buttonText","cancelText"])],64))}});export{ue as default};
