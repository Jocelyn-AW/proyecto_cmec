import{c as h,w as u,d as t,b as s,o as g,g as C,j as B,f as b,k as P,v as F,t as V,x as f,s as _}from"./app-IUHsy1AL.js";import{_ as j}from"./Modal-B2dS2fCu.js";import{u as D}from"./useImageUpload-Ds5_HjfY.js";const E={class:"p-6 space-y-4"},N={key:0,class:"mb-4"},S={class:"w-full h-48 overflow-hidden rounded-lg border border-gray-300"},I=["src"],M=["disabled"],G=["disabled"],W={__name:"PublicityCreateModal",props:{show:{type:Boolean,default:!1},nextOrder:{type:Number,default:0}},emits:["close","created","warning","error","info"],setup(m,{emit:x}){const v=m,a=x,r=f({link:""}),l=f(!1),{file:n,preview:c,handleChange:p,reset:y}=D({maxSizeMB:1,onError:o=>a("warning",o)}),w=()=>{r.value={link:""},y()},i=()=>{w(),a("close")},k=()=>{if(!n.value){a("info","Por favor selecciona una imagen");return}l.value=!0;const o=new FormData;o.append("image",n.value),o.append("order",v.nextOrder),r.value.link&&r.value.link.trim()!==""&&o.append("link",r.value.link),_.post("/publicity",o,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{i(),a("created")},onError:()=>{a("error","Error al crear la publicidad")},onFinish:()=>{l.value=!1}})};return(o,e)=>(g(),h(j,{show:m.show,onClose:i,maxWidth:"2xl"},{title:u(()=>[...e[2]||(e[2]=[b(" Crear publicidad ",-1)])]),footer:u(()=>[t("button",{onClick:i,disabled:l.value,class:"rounded-md border border-transparent py-2 px-4 text-sm text-slate-600 transition-all hover:bg-slate-100 disabled:opacity-50"}," Cancelar ",8,M),t("button",{onClick:k,disabled:l.value||!s(n),class:"rounded-md bg-green-600 py-2 px-4 text-sm text-white transition-all shadow-md hover:bg-green-700 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},V(l.value?"Creando...":"Crear publicidad"),9,G)]),default:u(()=>[t("div",E,[s(c)?(g(),C("div",N,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vista previa",-1)),t("div",S,[t("img",{src:s(c),class:"w-full h-full object-cover",alt:"Vista previa"},null,8,I)])])):B("",!0),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Imagen "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",onChange:e[0]||(e[0]=(...d)=>s(p)&&s(p)(...d)),class:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none"},null,32),e[5]||(e[5]=t("p",{class:"mt-1 text-xs text-gray-500"}," Formato permitido: JPG, PNG, WEBP (Peso mÃ¡x. 1MB) ",-1))]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Link (opcional) ",-1)),P(t("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>r.value.link=d),type:"text",placeholder:"https://ejemplo.com",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:ring-green-500"},null,512),[[F,r.value.link]])])])]),_:1},8,["show"]))}};export{W as default};
