import{x as u,E as G,g as x,a as p,b as r,h as H,d as s,w as i,n as y,f as w,t as n,k as A,o as h,F as $,q as I,y as T,j as R,G as J,s as V}from"./app-IggChIWS.js";import{_ as K}from"./AuthenticatedLayout-CsDyOoFW.js";import{_ as Q}from"./DataTable-2YN-GWnB.js";import{u as W}from"./useAlert-GbgKIWpm.js";import{_ as X}from"./Alerta-CjNrtwdw.js";import Y from"./CreateAttendee-CEKQU7kG.js";import Z from"./EditAttendee-CvSAbcoX.js";import ee from"./UploadDiploma-B_WFw_Ey.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BoklzHPy.js";import"./useStatesAndCities-CBCPwn9Z.js";import"./Modal-DP7vPZY9.js";import"./useImageDropped-ClZR24Qj.js";const te={class:"p-6 border-t border-gray-100 dark:border-gray-800 sm:p-6"},se={class:"space-y-5"},ae={class:"flex flex-col gap-3 px-4 py-4 sm:flex-row sm:items-center sm:justify-between"},re={class:"flex flex-wrap items-center gap-3"},oe=["value"],ne=["onClick"],le=["onClick"],he=Object.assign({layout:K},{__name:"Index",props:{attendees:{type:Object,default:()=>({})},events:{type:Object,default:()=>({})},eventName:{type:String,default:""},flash:{type:Object,default:()=>({})},auth:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})}},setup(_){const{alertState:l,success:k,errorA:S,warning:z,hideAlert:v}=W(),f=u(!1),b=u(!1),C=u(!1),c=u(null),m=u(route().params.event_id??""),g=u(route().params.did_attend??""),o=_,d=J();G(()=>{(d.props.success||o.flash.success)&&k(d.props.success||o.flash.success),(d.props.error||o.flash.error)&&S(d.props.error||o.flash.error),(d.props.warning||o.flash.warning)&&z(d.props.warning||o.flash.warning)});const E=()=>{f.value=!0},M=a=>{c.value=a,b.value=!0},D=a=>{z("¿Confirma que desea eliminar a este asistente? Esta acción no se puede deshacer.",{title:"Eliminar registro",buttonText:"Sí, eliminar",cancelText:"Cancelar",onConfirm:()=>{v(),V.delete(route("attendees.delete",a))}})},N=a=>{a.diploma_url?window.open(a.diploma_url,"_blank"):(c.value=a,C.value=!0)},j=()=>{k("Asistente registrado exitosamente"),f.value=!1},L=()=>{k("Asistente actualizado exitosamente"),b.value=!1,c.value=null},O=(a,t=50)=>a?a.length>t?a.substring(0,t)+"...":a:"",q=a=>{V.get(route("attendees.change-attend",a.id))},B={event_id:m,did_attend:g},F=()=>m.value||g.value,P=()=>{m.value="",g.value=""};return(a,t)=>(h(),x($,null,[p(r(H),{title:"Asistentes a cursos"}),s("div",te,[s("div",se,[t[14]||(t[14]=s("div",{class:""},[s("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Asistentes a cursos"),s("p",{class:"text-sm text-gray-500"},"Administra los asistentes registrados a cursos desde esta sección")],-1)),p(Q,{columns:[{label:"Curso",key:"event_name"},{label:"Asistente",key:"name"},{label:"Telefono",key:"phone"},{label:"Ciudad/Estado",key:"origin"},{label:"Tipo de Usuario",key:"person_type"},{label:"Estatus de Pago",key:"status"},{label:"Asistencia",key:"did_attend"}],"filter-values":B,paginator:o.attendees,searchable:!0,"per-page-options":[10,25,50,100],"allow-create":!0,"allow-actions":!0,"allow-edit":!0,"allow-delete":!0,onCreate:E,onEdit:M,onDelete:D,only:["attendees"]},{filters:i(()=>[s("div",ae,[s("div",re,[t[11]||(t[11]=s("label",{for:"per-page-select",class:"whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"}," Cursos ",-1)),A(s("select",{id:"event_id","onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),class:"rounded-lg border max-w-sm border-gray-300 bg-white py-2 pl-3 pr-8 text-sm text-gray-700 focus:border-zinc-500 focus:outline-none focus:ring-1 focus:ring-zinc-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-200"},[t[8]||(t[8]=s("option",{value:""},"Todos",-1)),(h(!0),x($,null,I(_.events,e=>(h(),x("option",{key:e.id,value:e.id},n(O(e.topic,25)),9,oe))),128))],512),[[T,m.value]]),t[12]||(t[12]=s("label",{for:"per-page-select",class:"whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"}," Asistencia ",-1)),A(s("select",{id:"attend","onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),class:"rounded-lg border max-w-sm border-gray-300 bg-white py-2 pl-3 pr-8 text-sm text-gray-700 focus:border-zinc-500 focus:outline-none focus:ring-1 focus:ring-zinc-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-200"},[...t[9]||(t[9]=[s("option",{value:""},"Todos",-1),s("option",{value:0},"No",-1),s("option",{value:1},"Si",-1)])],512),[[T,g.value]]),F()?(h(),x("button",{key:0,onClick:P,class:"inline-flex items-center gap-1.5 h-10 px-3 rounded-lg border border-gray-300 dark:border-gray-700 text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-red-500 transition-colors"},[...t[10]||(t[10]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),w(" Limpiar ",-1)])])):R("",!0)])])]),"cell-date":i(({item:e})=>[w(n(new Date(e.date).toLocaleDateString("en-GB")),1)]),"cell-origin":i(({item:e})=>[w(n(e.city?e.city+", ":"")+n(e.state||"")+". ",1)]),"cell-person_type":i(({item:e})=>[s("span",{class:y(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium capitalize",e.person_type=="member"?"bg-emerald-200 text-emerald-700":e.person_type=="resident"?"bg-sky-200 text-sky-700":"bg-gray-200 text-gray-700"])},n(e.person_type==="member"?"Miembro CMEC":"")+" "+n(e.person_type==="guest"?"Invitado":"")+" "+n(e.person_type==="resident"?"Residente":""),3)]),"cell-status":i(({item:e})=>[s("span",{class:y(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium capitalize",e.status=="pending"?"bg-amber-200 text-amber-700":e.status=="paid"?"bg-emerald-200 text-emerald-700":"bg-sky-200 text-sky-700"])},n(e.status==="paid"?"Pagado":"")+" "+n(e.status==="pending"?"Pendiente":"")+" "+n(e.status==="free"?"Gratis":""),3)]),"cell-did_attend":i(({item:e})=>[s("span",{role:"button",onClick:U=>q(e),class:y(["inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium capitalize",e.did_attend?"bg-emerald-200 text-emerald-700 hover:bg-emerald-300":"bg-orange-200 text-orange-700 hover:bg-orange-300"])},n(e.did_attend?"Sí":"No"),11,ne)]),"cell-event_name":i(({item:e})=>[w(n((e.event.topic||e.event.name)??"N/A"),1)]),actionButtons:i(({item:e})=>[s("button",{title:"Ver diploma",onClick:U=>N(e),class:y(["p-2 rounded-lg",e.diploma_url==null||e.diploma_url==""?"bg-amber-30 text-amber-500 hover:bg-amber-600 hover:text-white transition-colors border border-amber-100 hover:border-amber-600":"bg-amber-500 text-white hover:bg-amber-600 hover:text-white transition-colors border border-amber-500 hover:border-amber-100"])},[...t[13]||(t[13]=[s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"text-8xl w-4 h-4"},[s("g",{fill:"none"},[s("path",{d:"M24 0v24H0V0zM12.593 23.258l-.011.002-.071.035-.02.004-.014-.004-.071-.035q-.016-.005-.024.005l-.004.01-.017.428.005.02.01.013.104.074.015.004.012-.004.104-.074.012-.016.004-.017-.017-.427q-.004-.016-.017-.018m.265-.113-.013.002-.185.093-.01.01-.003.011.018.43.005.012.008.007.201.093q.019.005.029-.008l.004-.014-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014-.034.614q.001.018.017.024l.015-.002.201-.093.01-.008.004-.011.017-.43-.003-.012-.01-.01z"}),s("path",{fill:"currentColor",d:"M13.586 2a2 2 0 0 1 1.284.467l.13.119L19.414 7a2 2 0 0 1 .578 1.238l.008.176V20a2 2 0 0 1-1.85 1.995L18 22H6a2 2 0 0 1-1.995-1.85L4 20V4a2 2 0 0 1 1.85-1.995L6 2zM12 4H6v16h12V10h-4.5A1.5 1.5 0 0 1 12 8.5zm-.707 7.173a1 1 0 0 1 1.32-.083l.094.083 2.121 2.121a1 1 0 0 1-1.32 1.498l-.094-.084-.414-.414V17a1 1 0 0 1-1.993.117L11 17v-2.706l-.414.414a1 1 0 0 1-1.498-1.32l.084-.094zM14 4.414V8h3.586z"})])],-1)])],10,le)]),_:1},8,["paginator"]),p(Y,{show:f.value,"event-name":o.eventName,events:o.events,errors:o.errors,onClose:t[2]||(t[2]=e=>f.value=!1),onSuccess:j},null,8,["show","event-name","events","errors"]),p(Z,{show:b.value,"event-name":o.eventName,data:c.value,events:o.events,errors:o.errors,onClose:t[3]||(t[3]=e=>b.value=!1),onSuccess:L},null,8,["show","event-name","data","events","errors"]),p(ee,{show:C.value,attendee:c.value,onClose:t[4]||(t[4]=e=>C.value=!1)},null,8,["show","attendee"])])]),p(X,{show:r(l).show,message:r(l).message,title:r(l).title,type:r(l).type,buttonText:r(l).buttonText,cancelText:r(l).cancelText,onConfirm:t[5]||(t[5]=e=>r(l).onConfirm?r(l).onConfirm():r(v)()),onCancel:t[6]||(t[6]=e=>r(l).onCancel?r(l).onCancel():r(v)()),onClose:t[7]||(t[7]=e=>r(v)())},null,8,["show","message","title","type","buttonText","cancelText"])],64))}});export{he as default};
