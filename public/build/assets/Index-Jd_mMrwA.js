import{d as O}from"./vuedraggable.umd-BgEtWuVQ.js";import{z as S,g as A,a as d,b as n,h as I,d as r,f as N,w as D,o as g,c as V,s as w,x as l,p as G}from"./app-HE2xJTpK.js";import{_ as U}from"./AuthenticatedLayout-BW9za3Zh.js";import{_ as W}from"./Alerta-bqLmTZs7.js";import{u as L}from"./useAlert-CztCJmqn.js";import q from"./BannerEditModal-ChinUapR.js";import F from"./BannerCreateModal-BAWNuBOE.js";import H from"./BannerListItem-S2TKQzme.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-aoiOxo1b.js";import"./Modal-Cg_LryEg.js";import"./useImageUpload-CfIonlKs.js";const K={class:"p-6 border-t border-gray-100 dark:border-gray-800 sm:p-6 lg:p-8"},P={class:"space-y-5"},Q={class:"overflow-hidden rounded-2xl border border-gray-200 bg-white pt-4 dark:border-gray-800 dark:bg-white/[0.03]"},R={class:"flex flex-col sm:flex-row items-center justify-between gap-4 px-6 mb-4"},X={class:"block px-5 pb-4"},Y={class:"space-y-4"},Z=Object.assign({layout:U},{__name:"Index",props:{banners:{type:Array,default:()=>[]}},setup(h){const x=h,{alertState:o,success:u,errorA:m,warning:i}=L(),s=l([]),c=l([]),b=l(!1),p=l(!1),f=l(!1),v=l(null),y=G(()=>s.value.length===0?0:Math.max(...s.value.map(e=>e.order??0))+1);S(()=>x.banners,()=>{const a=[...x.banners].sort((e,t)=>(e.order??0)-(t.order??0));s.value=a.map(e=>({...e})),c.value=a.map(e=>({...e}))},{immediate:!0});const C=()=>{b.value=!0},E=()=>{b.value=!1},k=()=>{const a={banners:s.value.map((e,t)=>({id:e.id,order:t}))};w.post("/banners/reorder",a,{preserveScroll:!0,onSuccess:()=>{c.value=s.value.map(e=>({...e})),u("Orden actualizado correctamente")},onError:()=>{m("Error actualizando el orden")}})},B=()=>{s.value=c.value.map(a=>({...a}))},_=a=>{const e=s.value.find(t=>t.id===a);if(!e){i("Banner no encontrado");return}v.value={...e},f.value=!0},T=a=>{i("Estas seguro de eliminar este banner?",{title:"Eliminar banner",buttonText:"Eliminar",cancelText:"Cancelar",onConfirm:()=>{w.delete(`/banners/${a}`,{preserveScroll:!0,onSuccess:()=>{u("Banner eliminado correctamente")},onError:()=>{m("Error al eliminar el banner")}})}})},$=()=>{u("El banner ha sido creado correctamente")},z=()=>{u("El banner ha sido actualizado correctamente")},j=()=>{o.value.onConfirm?.(),o.value.show=!1},M=()=>{o.value.onCancel?.(),o.value.show=!1};return(a,e)=>(g(),A("div",null,[d(n(I),{title:"Banners"}),r("div",K,[r("div",P,[e[11]||(e[11]=r("div",{class:"flex flex-col gap-5 px-6 mb-4 sm:flex-row sm:items-center sm:justify-between"},[r("div",null,[r("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Banners"),r("p",{class:"text-sm text-gray-500"},' Arrastra las filas para reordenar y pulsa "Guardar orden" ')])],-1)),r("div",Q,[r("div",R,[r("div",{class:"flex items-center gap-2 w-full sm:w-auto"},[r("button",{onClick:B,class:"inline-flex h-10 w-full sm:w-auto justify-center items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors"}," Cancelar "),r("button",{onClick:k,class:"inline-flex h-10 w-full sm:w-auto justify-center items-center gap-2 rounded-lg bg-zinc-900 text-white px-4 py-2.5 text-sm font-medium hover:bg-zinc-800 transition-colors"}," Guardar orden ")]),e[10]||(e[10]=r("p",{class:"text-sm text-amber-600 dark:text-amber-500"}," ⚠️ Las imágenes deben pesar máximo 1MB ",-1)),r("button",{onClick:e[0]||(e[0]=t=>p.value=!0),class:"inline-flex h-10 w-full sm:w-auto justify-center items-center gap-2 rounded-lg bg-green-600 text-white px-4 py-2.5 text-sm font-medium hover:bg-green-700 transition-colors shadow-sm"},[...e[9]||(e[9]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5"},[r("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1),N(" Nuevo banner ",-1)])])]),r("div",X,[r("div",Y,[d(n(O),{list:s.value,"ghost-class":"ghost","item-key":"id",onStart:C,onEnd:E},{item:D(({element:t})=>[(g(),V(H,{key:t.id,banner:t,onEdit:_,onDelete:T},null,8,["banner"]))]),_:1},8,["list"])])])])])]),d(F,{show:p.value,"next-order":y.value,onClose:e[1]||(e[1]=t=>p.value=!1),onCreated:$,onWarning:e[2]||(e[2]=t=>n(i)(t)),onError:e[3]||(e[3]=t=>n(m)(t)),onInfo:e[4]||(e[4]=t=>n(i)(t))},null,8,["show","next-order"]),d(q,{show:f.value,banner:v.value,onClose:e[5]||(e[5]=t=>{f.value=!1,v.value=null}),onUpdated:z,onWarning:e[6]||(e[6]=t=>n(i)(t)),onError:e[7]||(e[7]=t=>n(m)(t))},null,8,["show","banner"]),d(W,{show:n(o).show,message:n(o).message,title:n(o).title,type:n(o).type,buttonText:n(o).buttonText,cancelText:n(o).cancelText,onConfirm:j,onCancel:M,onClose:e[8]||(e[8]=t=>n(o).show=!1)},null,8,["show","message","title","type","buttonText","cancelText"])]))}}),pe=J(Z,[["__scopeId","data-v-2b077182"]]);export{pe as default};
