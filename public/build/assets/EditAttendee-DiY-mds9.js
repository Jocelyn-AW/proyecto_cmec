import{z as b,c as P,w as M,d as l,t as i,k as p,o as n,g as r,F as k,q as C,y as v,j as m,v as x,b as T,n as z,B as $,p as j,x as S,s as G,G as R}from"./app-IggChIWS.js";import{u as H}from"./useAlert-GbgKIWpm.js";import{s as E,_ as L}from"./useStatesAndCities-CBCPwn9Z.js";const q={class:"space-y-4"},I={class:"block text-sm font-medium text-gray-700 mb-1"},J=["value"],K={key:0,class:"text-red-500 text-xs flex justify-end"},Q={key:0,class:"text-red-500 text-xs flex justify-end"},W={key:0,class:"text-red-500 text-xs flex justify-end"},X={key:0,class:"text-red-500 text-xs flex justify-end"},Y={class:"flex gap-2 w-full"},Z=["value"],h=["disabled"],ee=["value"],te={key:0,class:"text-red-500 text-xs flex justify-end"},le={key:0,class:"text-red-500 text-xs flex justify-end"},se={key:0},oe={key:0,class:"text-red-500 text-xs flex justify-end"},ae={class:"flex gap-2 w-full"},ne={class:"relative grow"},re=["value"],ue={key:0,class:"text-xs text-gray-400 mt-1"},ie={key:1,class:"text-red-500 text-xs flex justify-end"},de={class:"flex justify-end gap-2"},ye={__name:"EditAttendee",props:{events:{type:Array,default:()=>[]},eventName:{type:String,default:""},data:{type:Object,default:()=>({})},show:{type:Boolean,default:!1},errors:{type:Object,default:()=>({})}},emits:["close","success","error"],setup(f,{emit:F}){const{warning:B}=H(),c=S(""),y=S(""),d=S(null),N=j(()=>c.value?E[c.value]:[]),o=f,A=R(),a=j(()=>A.props.errors||o.errors||{}),g=F,_=j(()=>!d.value||!t.person_type?t.price??"":{member:d.value.member_price,guest:d.value.guest_price,resident:d.value.resident_price}[t.person_type]??t.price??""),w=(u=5)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let s="";for(let U=0;U<u;U++)s+=e.charAt(Math.floor(Math.random()*e.length));return s},t=$({_method:"put",id:null,name:"",email:"",phone:"",event_id:"",event_type:"webinar",state:"",city:"",person_type:"",folio:w(),status:"",price:"",cmec_member_id:null}),V=()=>{t.id=null,t.name="",t.email="",t.phone="",t.event_id="",t.event_type="webinar",t.state="",t.city="",t.person_type="",t.folio=w(),t.status="",t.cmec_member_id=null,t.price="",d.value=null,c.value="",y.value=""},D=()=>{t.id=o.data.id||null,t.name=o.data.name||"",t.email=o.data.email||"",t.phone=o.data.phone||"",t.event_id=o.data.event_id||"",t.event_type=o.data.event_type||"webinar",t.state=o.data.state||"",t.city=o.data.city||"",t.person_type=o.data.person_type||"",t.folio=o.data.folio||w(),t.status=o.data.status||"",t.cmec_member_id=o.data.cmec_member_id||null,t.price=o.data.price||"",d.value=o.events.find(u=>u.id===o.data.event_id)||null,c.value=o.data.state||"",y.value=o.data.city||""},O=()=>{t.event_id=d?.value?.id,t.event_type="webinar",t.price=_.value,G.post(route("attendees.update",t.id),t,{onSuccess:()=>{V(),g("success")},onError:()=>{B("Hubo un error en la actualización.")}})};return b(_,u=>{t.price=u}),b(()=>t.person_type,u=>{u==="member"?t.cmec_member_id="":t.cmec_member_id=null}),b(()=>o.show,u=>{V(),u&&D()}),b(c,(u,e)=>{e!==""&&e!==t.state&&(y.value=""),t.state=u}),b(y,u=>{t.city=u}),(u,e)=>(n(),P(L,{show:f.show,size:"xl",onClose:e[11]||(e[11]=s=>g("close"))},{footer:M(()=>[l("div",de,[l("button",{type:"button",class:"rounded-lg border px-4 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:e[10]||(e[10]=s=>g("close"))}," Cancelar "),l("button",{type:"button",class:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",onClick:O}," Guardar ")])]),default:M(()=>[l("div",q,[e[26]||(e[26]=l("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Editar participante",-1)),l("div",null,[l("label",I,i(o.eventName),1),p(l("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[12]||(e[12]=l("option",{value:null},"Seleccionar webinar",-1)),(n(!0),r(k,null,C(f.events,s=>(n(),r("option",{key:s.id,value:s},i(s.topic),9,J))),128))],512),[[v,d.value]]),a.value?.event_id?(n(),r("span",K,i(a.value?.event_id),1)):m("",!0)]),l("div",null,[e[13]||(e[13]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre médico (se mostrará en el diploma)",-1)),p(l("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>t.name=s),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,t.name]]),a.value?.name?(n(),r("span",Q,i(a.value?.name),1)):m("",!0)]),l("div",null,[e[14]||(e[14]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Correo electrónico",-1)),p(l("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.email=s),type:"email",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,t.email]]),a.value?.email?(n(),r("span",W,i(a.value?.email),1)):m("",!0)]),l("div",null,[e[15]||(e[15]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Teléfono",-1)),p(l("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>t.phone=s),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,t.phone]]),a.value?.phone?(n(),r("span",X,i(a.value?.phone),1)):m("",!0)]),l("div",null,[e[18]||(e[18]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Origen",-1)),l("div",Y,[p(l("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>c.value=s),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[16]||(e[16]=l("option",{value:""},"Seleccionar estado",-1)),(n(!0),r(k,null,C(Object.keys(T(E)),s=>(n(),r("option",{key:s,value:s},i(s),9,Z))),128))],512),[[v,c.value]]),p(l("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>y.value=s),disabled:!c.value,class:z([c.value?"":"cursor-not-allowed opacity-60","w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"])},[e[17]||(e[17]=l("option",{value:""},"Seleccionar ciudad",-1)),(n(!0),r(k,null,C(N.value,s=>(n(),r("option",{key:s,value:s},i(s),9,ee))),128))],10,h),[[v,y.value]])]),a.value?.city||a.value?.state?(n(),r("span",te,i(a.value?.city||a.value?.state),1)):m("",!0)]),l("div",null,[e[20]||(e[20]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipo de participante",-1)),p(l("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>t.person_type=s),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[19]||(e[19]=[l("option",{value:""},"Seleccionar tipo",-1),l("option",{value:"member"},"Miembro CMEC",-1),l("option",{value:"resident"},"Residente",-1),l("option",{value:"guest"},"No miembro (invitado)",-1)])],512),[[v,t.person_type]]),a.value?.person_type?(n(),r("span",le,i(a.value?.person_type),1)):m("",!0)]),t.person_type==="member"?(n(),r("div",se,[e[21]||(e[21]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Folio de miembro CMEC",-1)),p(l("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>t.cmec_member_id=s),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,t.cmec_member_id]]),a.value?.cmec_member_id?(n(),r("span",oe,i(a.value?.cmec_member_id),1)):m("",!0)])):m("",!0),e[27]||(e[27]=l("hr",{class:"my-2"},null,-1)),l("div",null,[e[24]||(e[24]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Detalles de Pago",-1)),l("div",ae,[l("div",ne,[e[22]||(e[22]=l("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"},"$",-1)),l("input",{value:_.value,type:"number",readonly:"",disabled:"",class:"w-full rounded-lg border border-gray-200 bg-gray-50 pl-7 pr-3 py-2 text-sm text-gray-500 cursor-not-allowed",placeholder:"Selecciona webinar y tipo"},null,8,re)]),p(l("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>t.status=s),class:"rounded-lg grow border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[23]||(e[23]=[l("option",{value:""},"Seleccionar estatus",-1),l("option",{value:"paid"},"Pagado",-1),l("option",{value:"pending"},"Pendiente",-1)])],512),[[v,t.status]])]),!d.value||!t.person_type?(n(),r("p",ue," El precio se recalculará al cambiar el webinar o tipo de participante. ")):m("",!0),a.value?.status?(n(),r("span",ie,i(a.value?.status),1)):m("",!0)]),e[28]||(e[28]=l("hr",{class:"my-2"},null,-1)),l("div",null,[e[25]||(e[25]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Folio de Acceso",-1)),p(l("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>t.folio=s),type:"text",disabled:"",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm bg-gray-100 cursor-not-allowed"},null,512),[[x,t.folio]])])])]),_:1},8,["show"]))}};export{ye as default};
