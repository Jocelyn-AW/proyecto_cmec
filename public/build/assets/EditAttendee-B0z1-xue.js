import{I as T,B as $,z as b,c as z,w as N,d as s,t as i,k as d,o as a,g as u,F as k,q as C,y as v,v as g,j as c,b as R,n as h,J as G,p as j,x as S,s as I}from"./app-HE2xJTpK.js";import{_ as J}from"./AuthenticatedLayout-BW9za3Zh.js";import{u as q}from"./useAlert-CztCJmqn.js";import{s as O,_ as H}from"./useStatesAndCities-DqT8EIkQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-aoiOxo1b.js";const K={class:"space-y-4"},Q={class:"block text-sm font-medium text-gray-700 mb-1"},W=["value"],X={key:0,class:"text-red-500 text-xs flex justify-end"},Y={key:0,class:"text-red-500 text-xs flex justify-end"},Z={key:0,class:"text-red-500 text-xs flex justify-end"},ee={class:"flex gap-2 w-full"},te=["value"],se=["disabled"],oe=["value"],le={key:0,class:"text-red-500 text-xs flex justify-end"},ne={key:0,class:"text-red-500 text-xs flex justify-end"},re={key:0},ae={key:0,class:"text-red-500 text-xs flex justify-end"},ue={class:"flex gap-2 w-full"},ie=["value"],de={key:0,class:"text-red-500 text-xs flex justify-end"},pe={class:"flex justify-end gap-2"},ge=Object.assign({layout:J},{__name:"EditAttendee",props:{events:{type:Object,default:()=>({})},eventName:{type:String,default:""},data:{type:Object,default:()=>({})},show:{type:Boolean,default:!1},flash:{type:Object,default:()=>({})},auth:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})}},emits:["close","success","error"],setup(x,{emit:E}){const{success:F,errorA:B,warning:A}=q(),p=S(""),y=S(""),D=j(()=>p.value?O[p.value]:[]),l=x,f=G(),n=j(()=>f.props.errors||l.errors||{}),_=E,m=S(null),V=j(()=>!m.value||!t.person_type?"":{member:m.value.member_price,guest:m.value.guest_price,resident:m.value.resident_price}[t.person_type]??t.price);T(()=>{(f.props.success||l.flash.success)&&F(f.props.success||l.flash.success),(f.props.error||l.flash.error)&&B(f.props.error||l.flash.error),(f.props.warning||l.flash.warning)&&A(f.props.warning||l.flash.warning)});const w=(r=5)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let o="";for(let U=0;U<r;U++)o+=e.charAt(Math.floor(Math.random()*e.length));return o},t=$({_method:"put",id:null,name:"",email:"",phone:"",event_id:"",event_type:l.eventName.toLowerCase(),state:"",city:"",person_type:"",folio:w(),status:"",price:"",cmec_member_id:null}),M=()=>{t.id=null,t.name="",t.email="",t.phone="",t.event_id="",t.event_type=l.eventName.toLowerCase(),t.state="",t.city="",t.person_type="",t.folio=w(),t.status="",t.cmec_member_id=null,t.price="",m.value=null,y.value="",p.value=""},L=()=>{t.id=l.data.id||null,t.name=l.data.name||"",t.email=l.data.email||"",t.phone=l.data.phone||"",t.event_id=l.data.event_id||"",t.event_type=l.data.event_type||l.eventName.toLowerCase(),t.state=l.data.state||"",t.city=l.data.city||"",t.person_type=l.data.person_type||"",t.folio=l.data.folio||w(),t.status=l.data.status||"",t.cmec_member_id=l.data.cmec_member_id||null,t.price=l.data.price||"",m.value=l.events.find(r=>r.id===t.event_id),p.value=l.data.state||"",y.value=l.data.city||""},P=()=>{switch(t.event_type){case"curso":t.event_type="course";break;case"congreso":t.event_type="conference";break;case"webinar":t.event_type="webinar";break;default:t.event_type="course"}I.post(route("attendees.update",t.id),t,{onSuccess:()=>{M(),_("success")},onError:()=>{}})};return b(()=>t.person_type,r=>{r&&(r==="member"?t.cmec_member_id="":t.cmec_member_id=null)}),b(V,r=>{t.price=r}),b(()=>l.show,r=>{M(),r&&L()}),b(y,r=>{t.city=r}),b(p,(r,e)=>{e!==""&&e!==t.state&&(y.value=""),t.state=r}),(r,e)=>(a(),z(H,{show:x.show,size:"xl",onClose:e[11]||(e[11]=o=>_("close"))},{footer:N(()=>[s("div",pe,[s("button",{type:"button",class:"rounded-lg border px-4 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:e[10]||(e[10]=o=>_("close"))}," Cancelar "),s("button",{type:"button",class:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",onClick:P}," Guardar ")])]),default:N(()=>[s("div",K,[e[25]||(e[25]=s("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Editar participante",-1)),s("div",null,[s("label",Q,i(l.eventName),1),d(s("select",{name:"event_id",id:"event_id","onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[12]||(e[12]=s("option",{value:""},"Seleccionar curso",-1)),(a(!0),u(k,null,C(x.events,o=>(a(),u("option",{key:o.id,value:o},i(o.name||o.topic),9,W))),128))],512),[[v,m.value]])]),s("div",null,[e[13]||(e[13]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre médico (se mostrará en el diploma)",-1)),d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.name=o),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,t.name]]),n.value?.name?(a(),u("span",X,i(n.value?.name),1)):c("",!0)]),s("div",null,[e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Correo electrónico",-1)),d(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.email=o),type:"email",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,t.email]]),n.value?.email?(a(),u("span",Y,i(n.value?.email),1)):c("",!0)]),s("div",null,[e[15]||(e[15]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Teléfono",-1)),d(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.phone=o),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,t.phone]]),n.value?.phone?(a(),u("span",Z,i(n.value?.phone),1)):c("",!0)]),s("div",null,[e[18]||(e[18]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Origen",-1)),s("div",ee,[d(s("select",{name:"state",id:"state","onUpdate:modelValue":e[4]||(e[4]=o=>p.value=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[16]||(e[16]=s("option",{value:""},"Seleccionar estado",-1)),(a(!0),u(k,null,C(Object.keys(R(O)),o=>(a(),u("option",{key:o,value:o},i(o),9,te))),128))],512),[[v,p.value]]),d(s("select",{name:"event_id",id:"event_id","onUpdate:modelValue":e[5]||(e[5]=o=>y.value=o),disabled:!p.value,class:h([p.value?"":"cursor-not-allowed","w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"])},[e[17]||(e[17]=s("option",{value:""},"Seleccionar ciudad",-1)),(a(!0),u(k,null,C(D.value,o=>(a(),u("option",{key:o,value:o},i(o),9,oe))),128))],10,se),[[v,y.value]])]),n.value?.city||n.value?.state?(a(),u("span",le,i(n.value?.city||n.value?.state),1)):c("",!0)]),s("div",null,[e[20]||(e[20]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipo de participante",-1)),d(s("select",{name:"person_type",id:"person_type","onUpdate:modelValue":e[6]||(e[6]=o=>t.person_type=o),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[19]||(e[19]=[s("option",{value:"",selected:""},"Seleccionar tipo",-1),s("option",{value:"member"},"Miembro CMEC",-1),s("option",{value:"resident"},"Residente",-1),s("option",{value:"guest"},"No miembro (invitado)",-1)])],512),[[v,t.person_type]]),n.value?.person_type?(a(),u("span",ne,i(n.value?.person_type),1)):c("",!0)]),t.person_type=="member"?(a(),u("div",re,[e[21]||(e[21]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Folio de miembro CMEC",-1)),d(s("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>t.cmec_member_id=o),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[g,t.cmec_member_id]]),n.value?.cmec_member_id?(a(),u("span",ae,i(n.value?.cmec_member_id),1)):c("",!0)])):c("",!0),e[26]||(e[26]=s("hr",{class:"my-2"},null,-1)),s("div",null,[e[23]||(e[23]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Detalles de Pago",-1)),s("div",ue,[s("input",{value:V.value,type:"number",min:"0",step:"0.01",class:"grow rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Cantidad a pagar"},null,8,ie),d(s("select",{name:"status",id:"status","onUpdate:modelValue":e[8]||(e[8]=o=>t.status=o),class:"rounded-lg grow border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[22]||(e[22]=[s("option",{value:"",selected:""},"Seleccionar estatus",-1),s("option",{value:"paid"},"Pagado",-1),s("option",{value:"pending"},"Pendiente",-1)])],512),[[v,t.status]])]),n.value?.status?(a(),u("span",de,i(n.value?.status),1)):c("",!0)]),e[27]||(e[27]=s("hr",{class:"my-2"},null,-1)),s("div",null,[e[24]||(e[24]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Folio de Acceso",-1)),d(s("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>t.folio=o),type:"text",disabled:"",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-100 cursor-not-allowed"},null,512),[[g,t.folio]])])])]),_:1},8,["show"]))}});export{ge as default};
