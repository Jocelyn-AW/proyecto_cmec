import{c as j,w as E,o,g as n,d as r,t as i,f as _,k as b,n as c,F as M,q as L,y as O,v,j as d,T as U,x as y,s as N,p as I}from"./app-CJcVuNXu.js";const z={key:0,class:"border-t border-blue-100 dark:border-blue-900/40 bg-blue-50/60 dark:bg-blue-950/20 px-4 py-5 sm:px-6"},D={class:"flex items-center gap-2 mb-4"},F={class:"text-xs text-blue-500 truncate"},T={class:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3"},R={class:"sm:col-span-2 lg:col-span-1"},q={class:"relative"},G=["value"],H={key:0,class:"mt-2"},X={key:1,class:"mt-1.5 text-xs font-medium text-red-600 dark:text-red-400"},$={key:0,class:"mt-1.5 text-xs font-medium text-red-600 dark:text-red-400"},J={key:0,class:"mt-1.5 text-xs font-medium text-red-600 dark:text-red-400"},K={key:0,class:"mt-1.5 text-xs font-medium text-red-600 dark:text-red-400"},P={key:0,class:"mt-1.5 text-xs font-medium text-red-600 dark:text-red-400"},Q={key:0,class:"mt-1.5 text-xs font-medium text-red-600 dark:text-red-400"},W={class:"mt-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},Y={class:"flex items-center justify-end gap-2 shrink-0"},Z=["disabled"],ee=["disabled"],re={key:0,class:"animate-spin w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ae={__name:"BankDetailsEdit",props:{item:{type:Object,required:!0}},emits:["updated","error","warning","cancel"],setup(B,{expose:A,emit:C}){const s=B,p=C,f=y(!1),m=y(!1),t=y({}),k=["BBVA","Banamex (Citibanamex)","Santander","Banorte","HSBC","Scotiabank","Inbursa","Afirme","Bajío","Banregio","Banbajío","Mifel","Multiva","Azteca","BanBajío","Compartamos","Consubanco","Famsa","Intercam","Invex","Ixe","Monexcb","Sabadell","Ve por Más (BX+)","Otro"],u=y(""),g=y(""),w=I(()=>u.value==="Otro"?g.value.trim():u.value),a=y({account_number:"",clabe_number:"",reference:"",beneficiary:"",subsidiary:""}),V=()=>{const x=k.find(e=>e===s.item.bank);x&&x!=="Otro"?(u.value=x,g.value=""):s.item.bank?(u.value="Otro",g.value=s.item.bank):(u.value="",g.value=""),a.value={account_number:s.item.account_number??"",clabe_number:s.item.clabe_number??"",reference:s.item.reference??"",beneficiary:s.item.beneficiary??"",subsidiary:s.item.subsidiary??""},t.value={},f.value=!0},h=()=>{f.value=!1,t.value={},p("cancel")},S=()=>{if(t.value={},!w.value){t.value.bank=["El nombre del banco es obligatorio."];return}if(!a.value.account_number.trim()&&!a.value.clabe_number.trim()){t.value.account_number=["Ingresa el número de cuenta o la CLABE."];return}m.value=!0,N.put(`/bankdetails/${s.item.id}`,{bank:w.value,account_number:a.value.account_number.trim()||null,clabe_number:a.value.clabe_number.trim()||null,reference:a.value.reference.trim()||null,beneficiary:a.value.beneficiary.trim()||null,subsidiary:a.value.subsidiary.trim()||null},{preserveScroll:!0,onSuccess:()=>{p("updated"),f.value=!1},onError:x=>{t.value=x,p("warning","Revisa los campos del formulario.")},onFinish:()=>{m.value=!1}})};return A({open:V,close:h}),(x,e)=>(o(),j(U,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-1"},{default:E(()=>[f.value?(o(),n("div",z,[r("div",D,[e[7]||(e[7]=r("span",{class:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900/50"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-3 h-3 text-blue-600 dark:text-blue-400"},[r("path",{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"})])],-1)),e[8]||(e[8]=r("span",{class:"text-xs font-semibold text-blue-700 dark:text-blue-400 tracking-wide uppercase"}," Editando cuenta ",-1)),r("span",F,"· "+i(s.item.bank),1)]),r("div",T,[r("div",R,[e[11]||(e[11]=r("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"},[_(" Banco "),r("span",{class:"text-red-500"},"*")],-1)),r("div",q,[b(r("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),class:c(["block w-full rounded-lg border px-3 py-2 pr-8 text-sm appearance-none bg-white dark:bg-gray-800/80 focus:outline-none focus:ring-2 transition-colors",[t.value.bank?"border-red-400 dark:border-red-500 focus:ring-red-500/20":"border-gray-300 dark:border-gray-700 focus:border-blue-400 focus:ring-blue-500/20",u.value?"text-gray-800 dark:text-white/90":"text-gray-400 dark:text-white/30"]])},[e[9]||(e[9]=r("option",{value:"",disabled:""},"Selecciona un banco...",-1)),(o(),n(M,null,L(k,l=>r("option",{key:l,value:l},i(l),9,G)),64))],2),[[O,u.value]]),e[10]||(e[10]=r("span",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400"},[r("svg",{class:"stroke-current",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[r("path",{d:"M3.8335 5.9165L8.00016 10.0832L12.1668 5.9165",stroke:"","stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))]),u.value==="Otro"?(o(),n("div",H,[b(r("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>g.value=l),type:"text",maxlength:"100",placeholder:"Escribe el nombre del banco...",class:c(["block w-full rounded-lg border px-3 py-2 text-sm bg-white dark:bg-gray-800/80 dark:text-white/90 focus:outline-none focus:ring-2 transition-colors",t.value.bank?"border-red-400 dark:border-red-500 focus:ring-red-500/20":"border-gray-300 dark:border-gray-700 focus:border-blue-400 focus:ring-blue-500/20"])},null,2),[[v,g.value]])])):d("",!0),t.value.bank?(o(),n("p",X,i(Array.isArray(t.value.bank)?t.value.bank[0]:t.value.bank),1)):d("",!0)]),r("div",null,[e[12]||(e[12]=r("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"}," Cuenta / tarjeta ",-1)),b(r("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.account_number=l),type:"text",maxlength:"16",inputmode:"numeric",placeholder:"10–16 dígitos",class:c(["block w-full rounded-lg border px-3 py-2 text-sm bg-white dark:bg-gray-800/80 dark:text-white/90 shadow-sm focus:outline-none focus:ring-2 transition-colors font-mono tracking-wide",t.value.account_number?"border-red-400 dark:border-red-500 focus:ring-red-500/20":"border-gray-300 dark:border-gray-700 focus:border-blue-400 focus:ring-blue-500/20"])},null,2),[[v,a.value.account_number]]),t.value.account_number?(o(),n("p",$,i(Array.isArray(t.value.account_number)?t.value.account_number[0]:t.value.account_number),1)):d("",!0)]),r("div",null,[e[13]||(e[13]=r("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"}," CLABE interbancaria ",-1)),b(r("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.clabe_number=l),type:"text",maxlength:"18",inputmode:"numeric",placeholder:"18 dígitos",class:c(["block w-full rounded-lg border px-3 py-2 text-sm bg-white dark:bg-gray-800/80 dark:text-white/90 shadow-sm focus:outline-none focus:ring-2 transition-colors font-mono tracking-wide",t.value.clabe_number?"border-red-400 dark:border-red-500 focus:ring-red-500/20":"border-gray-300 dark:border-gray-700 focus:border-blue-400 focus:ring-blue-500/20"])},null,2),[[v,a.value.clabe_number]]),t.value.clabe_number?(o(),n("p",J,i(Array.isArray(t.value.clabe_number)?t.value.clabe_number[0]:t.value.clabe_number),1)):d("",!0)]),r("div",null,[e[14]||(e[14]=r("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"}," Beneficiario ",-1)),b(r("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.beneficiary=l),type:"text",maxlength:"255",placeholder:"Nombre del titular",class:c(["block w-full rounded-lg border px-3 py-2 text-sm bg-white dark:bg-gray-800/80 dark:text-white/90 shadow-sm focus:outline-none focus:ring-2 transition-colors",t.value.beneficiary?"border-red-400 dark:border-red-500 focus:ring-red-500/20":"border-gray-300 dark:border-gray-700 focus:border-blue-400 focus:ring-blue-500/20"])},null,2),[[v,a.value.beneficiary]]),t.value.beneficiary?(o(),n("p",K,i(Array.isArray(t.value.beneficiary)?t.value.beneficiary[0]:t.value.beneficiary),1)):d("",!0)]),r("div",null,[e[15]||(e[15]=r("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"}," Referencia ",-1)),b(r("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.reference=l),type:"text",maxlength:"255",placeholder:"Ej. Reembolso de insumos",class:c(["block w-full rounded-lg border px-3 py-2 text-sm bg-white dark:bg-gray-800/80 dark:text-white/90 shadow-sm focus:outline-none focus:ring-2 transition-colors",t.value.reference?"border-red-400 dark:border-red-500 focus:ring-red-500/20":"border-gray-300 dark:border-gray-700 focus:border-blue-400 focus:ring-blue-500/20"])},null,2),[[v,a.value.reference]]),t.value.reference?(o(),n("p",P,i(Array.isArray(t.value.reference)?t.value.reference[0]:t.value.reference),1)):d("",!0)]),r("div",null,[e[16]||(e[16]=r("label",{class:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"}," Sucursal ",-1)),b(r("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.subsidiary=l),type:"text",maxlength:"255",placeholder:"Nombre de la sucursal",class:c(["block w-full rounded-lg border px-3 py-2 text-sm bg-white dark:bg-gray-800/80 dark:text-white/90 shadow-sm focus:outline-none focus:ring-2 transition-colors",t.value.subsidiary?"border-red-400 dark:border-red-500 focus:ring-red-500/20":"border-gray-300 dark:border-gray-700 focus:border-blue-400 focus:ring-blue-500/20"])},null,2),[[v,a.value.subsidiary]]),t.value.subsidiary?(o(),n("p",Q,i(Array.isArray(t.value.subsidiary)?t.value.subsidiary[0]:t.value.subsidiary),1)):d("",!0)])]),r("div",W,[e[18]||(e[18]=r("p",{class:"text-xs text-gray-400 dark:text-gray-500"}," * Debes ingresar al menos el número de cuenta o la CLABE. ",-1)),r("div",Y,[r("button",{onClick:h,disabled:m.value,class:"rounded-lg border border-gray-300 dark:border-gray-700 px-4 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50"}," Cancelar ",8,Z),r("button",{onClick:S,disabled:m.value,class:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-1.5 text-sm font-medium text-white hover:bg-blue-700 shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[m.value?(o(),n("svg",re,[...e[17]||(e[17]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"},null,-1)])])):d("",!0),_(" "+i(m.value?"Guardando…":"Guardar cambios"),1)],8,ee)])])])):d("",!0)]),_:1}))}};export{ae as default};
