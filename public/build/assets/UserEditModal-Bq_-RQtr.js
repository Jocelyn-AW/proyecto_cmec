import{y as C,c as V,w as c,d as e,f as n,j as u,x as i,s as B,n as f,o as v,g as E,t as x,i as N,q as g,k as U,p as j}from"./app-TN2NL2-O.js";import{_ as M}from"./Modal-BmmOXwUG.js";const S={class:"p-6 space-y-4"},h={class:"relative"},z={key:0,class:"mt-1 text-xs text-red-500"},A=["disabled"],D=["disabled"],T={__name:"UserEditModal",props:{show:{type:Boolean,default:!1},user:{type:Object,default:null}},emits:["close","updated","warning","error"],setup(b,{emit:w}){const m=b,d=w,t=g(!1),r=g({name:"",email:"",password:"",password_confirmation:"",role:""}),l=U(()=>!r.value.password&&!r.value.password_confirmation?null:r.value.password!==r.value.password_confirmation?"Las contraseñas no coinciden":null);C(()=>m.user,a=>{a&&(r.value={name:a.name,email:a.email,password:"",password_confirmation:"",role:a.role})},{immediate:!0});const y=()=>{r.value={name:"",email:"",password:"",password_confirmation:"",role:""}},p=()=>{y(),d("close")},k=()=>{if(m.user){if(l.value){d("warning",l.value);return}t.value=!0,j.put(`/users/${m.user.id}`,r.value,{preserveScroll:!0,onSuccess:()=>{p(),d("updated")},onError:()=>{d("error","Error al actualizar el usuario")},onFinish:()=>{t.value=!1}})}};return(a,o)=>(v(),V(M,{show:b.show,onClose:p,maxWidth:"lg"},{title:c(()=>[...o[5]||(o[5]=[n("Editar usuario",-1)])]),footer:c(()=>[e("button",{onClick:p,disabled:t.value,class:"rounded-md border border-transparent py-2 px-4 text-sm text-slate-600 transition-all hover:bg-slate-100 disabled:opacity-50"}," Cancelar ",8,A),e("button",{onClick:k,disabled:t.value||!!l.value,class:"rounded-md bg-blue-600 py-2 px-4 text-sm text-white transition-all shadow-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},x(t.value?"Actualizando...":"Actualizar usuario"),9,D)]),default:c(()=>[e("div",S,[e("div",null,[o[6]||(o[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[n(" Nombre del usuario "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>r.value.name=s),type:"text",placeholder:"Nombre completo",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"},null,512),[[i,r.value.name]])]),e("div",null,[o[7]||(o[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[n(" Correo electrónico "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>r.value.email=s),type:"email",placeholder:"correo@ejemplo.com",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"},null,512),[[i,r.value.email]])]),e("div",null,[o[10]||(o[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[n(" Rol "),e("span",{class:"text-red-500"},"*")],-1)),e("div",h,[u(e("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>r.value.role=s),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 pr-8 text-sm appearance-none focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-900 dark:border-gray-700 dark:text-white/90"},[...o[8]||(o[8]=[e("option",{value:"administrador"},"Administrador",-1),e("option",{value:"miembro"},"Miembro",-1)])],512),[[B,r.value.role]]),o[9]||(o[9]=e("span",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-500"},[e("svg",{class:"stroke-current",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[e("path",{d:"M3.8335 5.9165L8.00016 10.0832L12.1668 5.9165",stroke:"","stroke-width":"1.2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))])]),e("div",null,[o[11]||(o[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[n(" Nueva contraseña "),e("span",{class:"text-gray-400 text-xs"},"(opcional)")],-1)),u(e("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>r.value.password=s),type:"password",placeholder:"Dejar vacío para no cambiar",class:f(["block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",{"border-red-500 focus:border-red-500 focus:ring-red-500":l.value}])},null,2),[[i,r.value.password]])]),e("div",null,[o[12]||(o[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Confirmar contraseña ",-1)),u(e("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>r.value.password_confirmation=s),type:"password",placeholder:"••••••••",class:f(["block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",{"border-red-500 focus:border-red-500 focus:ring-red-500":l.value}])},null,2),[[i,r.value.password_confirmation]]),l.value?(v(),E("p",z,x(l.value),1)):N("",!0)])])]),_:1},8,["show"]))}};export{T as default};
