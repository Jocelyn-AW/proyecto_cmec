import{c as C,w as i,d as e,b as d,o as c,g as B,i as _,f as p,j as P,x as F,t as j,q as g,p as D}from"./app-DK0nqKl3.js";import{_ as E}from"./Modal-zXR-PI-w.js";import{u as I}from"./useImageUpload-CL1QHweZ.js";const N={class:"p-6 space-y-4"},S={key:0,class:"mb-4"},V={class:"w-full h-48 overflow-hidden rounded-lg border border-gray-300"},M=["src"],G=["disabled"],O=["disabled"],q={__name:"BannerCreateModal",props:{show:{type:Boolean,default:!1},nextOrder:{type:Number,default:0}},emits:["close","created","warning","error","info"],setup(m,{emit:b}){const f=m,o=b,a=g({link:"",order:0}),s=g(!1),{file:l,preview:u,handleChange:x,reset:v}=I({maxSizeMB:1,onError:t=>o("warning",t)}),w=()=>{a.value={link:"",order:0},v()},n=()=>{w(),o("close")},y=t=>{x(t)},h=async()=>{if(!l.value){o("info","Por favor selecciona una imagen");return}s.value=!0;const t=new FormData;t.append("image",l.value),t.append("order",f.nextOrder),a.value.link&&a.value.link.trim()!==""&&t.append("link",a.value.link),D.post("/banners",t,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{n(),o("created")},onError:()=>{o("error","Error al crear el banner")},onFinish:()=>{s.value=!1}})};return(t,r)=>(c(),C(E,{show:m.show,onClose:n,maxWidth:"2xl"},{title:i(()=>[...r[1]||(r[1]=[p(" Crear banner ",-1)])]),footer:i(()=>[e("button",{onClick:n,disabled:s.value,class:"rounded-md border border-transparent py-2 px-4 text-sm text-slate-600 transition-all hover:bg-slate-100 disabled:opacity-50"}," Cancelar ",8,G),e("button",{onClick:h,disabled:s.value||!d(l),class:"rounded-md bg-green-600 py-2 px-4 text-sm text-white transition-all shadow-md hover:bg-green-700 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},j(s.value?"Creando...":"Crear banner"),9,O)]),default:i(()=>[e("div",N,[d(u)?(c(),B("div",S,[r[2]||(r[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vista previa",-1)),e("div",V,[e("img",{src:d(u),class:"w-full h-full object-cover",alt:"Preview del nuevo banner"},null,8,M)])])):_("",!0),e("div",null,[r[3]||(r[3]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[p(" Imagen "),e("span",{class:"text-red-500"},"*")],-1)),e("input",{type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",onChange:y,class:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none"},null,32),r[4]||(r[4]=e("p",{class:"mt-1 text-xs text-gray-500"}," Formato permitido: JPG, PNG, WEBP (Peso max. 1MB) ",-1))]),e("div",null,[r[5]||(r[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Link (opcional) ",-1)),P(e("input",{"onUpdate:modelValue":r[0]||(r[0]=k=>a.value.link=k),type:"text",placeholder:"https://ejemplo.com",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-green-500 focus:ring-green-500"},null,512),[[F,a.value.link]])])])]),_:1},8,["show"]))}};export{q as default};
