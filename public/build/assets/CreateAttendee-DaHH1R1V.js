import{z as b,c as P,w as M,d as t,t as u,k as i,o as r,g as n,F as k,q as _,y as c,j as d,v as x,b as D,n as O,B as T,p as C,x as S,s as $,G as z}from"./app-IggChIWS.js";import{s as N,_ as G}from"./useStatesAndCities-CBCPwn9Z.js";const R={class:"space-y-4"},L={class:"block text-sm font-medium text-gray-700 mb-1"},q=["value"],H={key:0,class:"text-red-500 text-xs flex justify-end"},I={key:0,class:"text-red-500 text-xs flex justify-end"},J={key:0,class:"text-red-500 text-xs flex justify-end"},K={key:0,class:"text-red-500 text-xs flex justify-end"},Q={class:"flex gap-2 w-full"},W=["value"],X=["disabled"],Y=["value"],Z={key:0,class:"text-red-500 text-xs flex justify-end"},h={key:0,class:"text-red-500 text-xs flex justify-end"},ee={key:0},te={key:0,class:"text-red-500 text-xs flex justify-end"},le={class:"flex gap-2 w-full"},se={class:"relative grow"},oe=["value"],re={key:0,class:"text-xs text-gray-400 mt-1"},ne={key:1,class:"text-red-500 text-xs flex justify-end"},ae={class:"flex justify-end gap-2"},de={__name:"CreateAttendee",props:{events:{type:Array,default:()=>[]},eventName:{type:String,default:""},show:{type:Boolean,default:!1},errors:{type:Object,default:()=>({})}},emits:["close","success","error"],setup(v,{emit:B}){const m=S(""),y=S(""),p=S(null),E=C(()=>m.value?N[m.value]:[]),f=v,F=z(),o=C(()=>F.props.errors||f.errors||{}),g=B,w=C(()=>!p.value||!l.person_type?"":{member:p.value.member_price,guest:p.value.guest_price,resident:p.value.resident_price}[l.person_type]??""),V=(a=5)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let s="";for(let U=0;U<a;U++)s+=e.charAt(Math.floor(Math.random()*e.length));return s},l=T({name:"",email:"",phone:"",event_id:"",event_type:"webinar",state:"",city:"",person_type:"",folio:V(),status:"",price:"",cmec_member_id:null}),j=()=>{l.name="",l.email="",l.phone="",l.event_id="",l.event_type="webinar",l.state="",l.city="",l.person_type="",l.folio=V(),l.status="",l.cmec_member_id=null,l.price="",p.value=null,m.value="",y.value=""},A=()=>{l.event_id=p?.value?.id,l.event_type="webinar",l.price=w.value,$.post(route("attendees.store"),l,{onSuccess:()=>{j(),g("success")},onError:()=>{}})};return b(w,a=>{l.price=a}),b(()=>l.person_type,a=>{a==="member"?l.cmec_member_id="":l.cmec_member_id=null}),b(()=>f.show,a=>{a&&j()}),b(m,a=>{y.value="",l.state=a}),b(y,a=>{l.city=a}),(a,e)=>(r(),P(G,{show:v.show,size:"xl",onClose:e[11]||(e[11]=s=>g("close"))},{footer:M(()=>[t("div",ae,[t("button",{type:"button",class:"rounded-lg border px-4 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:e[10]||(e[10]=s=>g("close"))}," Cancelar "),t("button",{type:"button",class:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",onClick:A}," Guardar ")])]),default:M(()=>[t("div",R,[e[26]||(e[26]=t("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Nuevo participante",-1)),t("div",null,[t("label",L,u(f.eventName),1),i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[12]||(e[12]=t("option",{value:null},"Seleccionar webinar",-1)),(r(!0),n(k,null,_(v.events,s=>(r(),n("option",{key:s.id,value:s},u(s.topic),9,q))),128))],512),[[c,p.value]]),o.value?.event_id?(r(),n("span",H,u(o.value?.event_id),1)):d("",!0)]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre médico (se mostrará en el diploma)",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.name=s),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,l.name]]),o.value?.name?(r(),n("span",I,u(o.value?.name),1)):d("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Correo electrónico",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.email=s),type:"email",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,l.email]]),o.value?.email?(r(),n("span",J,u(o.value?.email),1)):d("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Teléfono",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.phone=s),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,l.phone]]),o.value?.phone?(r(),n("span",K,u(o.value?.phone),1)):d("",!0)]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Origen",-1)),t("div",Q,[i(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>m.value=s),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[16]||(e[16]=t("option",{value:""},"Seleccionar estado",-1)),(r(!0),n(k,null,_(Object.keys(D(N)),s=>(r(),n("option",{key:s,value:s},u(s),9,W))),128))],512),[[c,m.value]]),i(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>y.value=s),disabled:!m.value,class:O([m.value?"":"cursor-not-allowed opacity-60","w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"])},[e[17]||(e[17]=t("option",{value:""},"Seleccionar ciudad",-1)),(r(!0),n(k,null,_(E.value,s=>(r(),n("option",{key:s,value:s},u(s),9,Y))),128))],10,X),[[c,y.value]])]),o.value?.city||o.value?.state?(r(),n("span",Z,u(o.value?.city||o.value?.state),1)):d("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipo de participante",-1)),i(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>l.person_type=s),class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[19]||(e[19]=[t("option",{value:""},"Seleccionar tipo",-1),t("option",{value:"member"},"Miembro CMEC",-1),t("option",{value:"resident"},"Residente",-1),t("option",{value:"guest"},"No miembro (invitado)",-1)])],512),[[c,l.person_type]]),o.value?.person_type?(r(),n("span",h,u(o.value?.person_type),1)):d("",!0)]),l.person_type==="member"?(r(),n("div",ee,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Folio de miembro CMEC",-1)),i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>l.cmec_member_id=s),type:"text",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[x,l.cmec_member_id]]),o.value?.cmec_member_id?(r(),n("span",te,u(o.value?.cmec_member_id),1)):d("",!0)])):d("",!0),e[27]||(e[27]=t("hr",{class:"my-2"},null,-1)),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Detalles de Pago",-1)),t("div",le,[t("div",se,[e[22]||(e[22]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"},"$",-1)),t("input",{value:w.value,type:"number",readonly:"",disabled:"",class:"w-full rounded-lg border border-gray-200 bg-gray-50 pl-7 pr-3 py-2 text-sm text-gray-500 cursor-not-allowed",placeholder:"Selecciona webinar y tipo"},null,8,oe)]),i(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>l.status=s),class:"rounded-lg grow border border-gray-300 px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[...e[23]||(e[23]=[t("option",{value:""},"Seleccionar estatus",-1),t("option",{value:"paid"},"Pagado",-1),t("option",{value:"pending"},"Pendiente",-1)])],512),[[c,l.status]])]),!p.value||!l.person_type?(r(),n("p",re," El precio se calculará al seleccionar el webinar y tipo de participante. ")):d("",!0),o.value?.status?(r(),n("span",ne,u(o.value?.status),1)):d("",!0)]),e[28]||(e[28]=t("hr",{class:"my-2"},null,-1)),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Folio de Acceso",-1)),i(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>l.folio=s),type:"text",disabled:"",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-sm bg-gray-100 cursor-not-allowed"},null,512),[[x,l.folio]])])])]),_:1},8,["show"]))}};export{de as default};
